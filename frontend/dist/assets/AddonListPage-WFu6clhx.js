import{r as S,j as r}from"./radix-B0d9A4Hp.js";import{b1 as De,c as ee,b2 as je,o as ye,X as Fe,b3 as we,b4 as Ne,b5 as Se,b6 as Ae,b7 as Ce,$ as Oe,h as Le,d as ke,a8 as Te,a as Ee,f as Pe,D as Me,q as $e,Z as Ve,t as Re,r as Ue,s as Ie,w as Qe,x as qe,b8 as Be,b9 as fe,ba as de,aF as me,bb as he,bc as pe,bd as ge,av as ze,be as Ge,bf as xe,bg as Ze,g as Je,I as He}from"./index-DqfNU3ry.js";import{L as Ke}from"./ListPageLayout-2QiQEJRp.js";import{M as We}from"./ModPageLinks-B72QP8Mt.js";import{d as ve}from"./tanstack-BKPRn8Ud.js";import"./animation-tNjqXOyv.js";const Xe=De.map(t=>t.value.toLowerCase()),Ye=t=>t.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),et=t=>{const e=ee.c(5),{categories:s}=t;let i,a;if(e[0]!==s){a=Symbol.for("react.early_return_sentinel");e:{const m=je(s);if(m.length===0){a=null;break e}i=[...new Set(m.filter(st).map(rt))].map(Ye)}e[0]=s,e[1]=i,e[2]=a}else i=e[1],a=e[2];if(a!==Symbol.for("react.early_return_sentinel"))return a;const c=i;if(c.length===0)return null;let d;return e[3]!==c?(d=r.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:c.map(at)}),e[3]=c,e[4]=d):d=e[4],d},tt=S.memo(et);function st(t){return!Xe.includes(t)}function rt(t){return t.toLowerCase()}function at(t){return r.jsx(ye,{children:t},t)}const it=t=>{const e=ee.c(7),{versions:s}=t;let i,a,c;if(e[0]!==s){c=Symbol.for("react.early_return_sentinel");e:{const m=je(s);if(m.length===0){c=null;break e}i="mt-3 flex flex-wrap gap-1.5",a=m.map(lt)}e[0]=s,e[1]=i,e[2]=a,e[3]=c}else i=e[1],a=e[2],c=e[3];if(c!==Symbol.for("react.early_return_sentinel"))return c;let d;return e[4]!==i||e[5]!==a?(d=r.jsx("div",{className:i,children:a}),e[4]=i,e[5]=a,e[6]=d):d=e[6],d};function lt(t){return r.jsx(ye,{variant:"secondary",className:"px-1.5 py-0.5 font-mono text-xs",children:t},t)}const nt=t=>{const e=ee.c(18),{authors:s,downloads:i,claimed_by:a}=t;let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx(Fe,{className:"h-3.5"}),e[0]=c):c=e[0];let d;e[1]!==s?(d=s&&s.length>0?s.join(", "):"Unknown",e[1]=s,e[2]=d):d=e[2];let m;e[3]!==d?(m=r.jsx("span",{className:"truncate",children:d}),e[3]=d,e[4]=m):m=e[4];let n;e[5]!==a?(n=a&&r.jsx(we,{children:r.jsxs(Ne,{children:[r.jsx(Se,{children:r.jsx("span",{className:"text-primary inline text-xs",children:r.jsx(Ae,{className:"text-primary h-3.5"})})}),r.jsx(Ce,{children:"The addon has been verified and it is owned by that user"})]})}),e[5]=a,e[6]=n):n=e[6];let w;e[7]!==m||e[8]!==n?(w=r.jsxs("div",{className:"flex items-center gap-0.5 border-b pb-1",children:[c,m,n]}),e[7]=m,e[8]=n,e[9]=w):w=e[9];let y;e[10]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(Oe,{className:"h-3.5"}),e[10]=y):y=e[10];let v;e[11]!==i?(v=i.toLocaleString(),e[11]=i,e[12]=v):v=e[12];let p;e[13]!==v?(p=r.jsxs("div",{className:"flex items-center gap-0.5 border-b pb-1",children:[y,r.jsx("span",{className:"mr-1",children:v})]}),e[13]=v,e[14]=p):p=e[14];let E;return e[15]!==w||e[16]!==p?(E=r.jsxs("div",{className:"text-foreground-muted mt-3 flex items-center justify-between text-xs",children:[w,p]}),e[15]=w,e[16]=p,e[17]=E):E=e[17],E},ot=t=>{const e=ee.c(65),{addon:s}=t,i=Le();let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[0]=a):a=e[0];const[c,d]=S.useState(a);let m,n;e[1]!==s.curseforge_raw||e[2]!==s.modrinth_raw?(m=()=>{const _=[];s.curseforge_raw&&_.push("curseforge"),s.modrinth_raw&&_.push("modrinth"),d(_)},n=[s.curseforge_raw,s.modrinth_raw],e[1]=s.curseforge_raw,e[2]=s.modrinth_raw,e[3]=m,e[4]=n):(m=e[3],n=e[4]),S.useEffect(m,n);const w=ft;let y;e[5]!==s.slug||e[6]!==i?(y=()=>{i(`/addons/${s.slug}`)},e[5]=s.slug,e[6]=i,e[7]=y):y=e[7];const v=y;let p;e[8]===Symbol.for("react.memo_cache_sentinel")?(p=_=>{const H={basicInfo:{name:_.name||"MISSING",displayName:w(_),slug:_.slug,authors:_.authors},rawDataInfo:{curseforge_raw_type:typeof _.curseforge_raw,curseforge_raw_length:typeof _.curseforge_raw=="string"?_.curseforge_raw.length:_.curseforge_raw?"object":"null",curseforge_raw_preview:typeof _.curseforge_raw=="string"?_.curseforge_raw.substring(0,100)+"...":_.curseforge_raw?"Object present":"null",modrinth_raw_type:typeof _.modrinth_raw,modrinth_raw_length:typeof _.modrinth_raw=="string"?_.modrinth_raw.length:_.modrinth_raw?"object":"null",modrinth_raw_preview:typeof _.modrinth_raw=="string"?_.modrinth_raw.substring(0,100)+"...":_.modrinth_raw?"Object present":"null"},fullData:_};return JSON.stringify(H,null,2)},e[8]=p):p=e[8];const E=p,G=ht,q=bt,u=_t,o=typeof window<"u"&&window.localStorage.getItem("debug")==="true",g=s.icon||"/assets/wrench.webp";let f;e[9]!==s?(f=w(s),e[9]=s,e[10]=f):f=e[10];let h;e[11]!==g||e[12]!==f?(h=r.jsx("img",{src:g,alt:f,loading:"lazy",className:"h-12 w-12 object-cover"}),e[11]=g,e[12]=f,e[13]=h):h=e[13];let j;e[14]!==s?(j=w(s),e[14]=s,e[15]=j):j=e[15];let N;e[16]!==j?(N=r.jsx("h3",{className:"truncate text-sm font-medium",children:j}),e[16]=j,e[17]=N):N=e[17];let l;e[18]!==v||e[19]!==N||e[20]!==h?(l=r.jsxs(ke,{className:"relative flex cursor-pointer flex-row gap-3",onClick:v,children:[h,N]}),e[18]=v,e[19]=N,e[20]=h,e[21]=l):l=e[21];let B;e[22]!==s.description?(B=r.jsx("p",{className:"text-foreground-muted text-xs",children:s.description}),e[22]=s.description,e[23]=B):B=e[23];let R;e[24]!==s.loaders?(R=G(s.loaders),e[24]=s.loaders,e[25]=R):R=e[25];let C;e[26]!==R?(C=r.jsx("div",{className:"mt-2 flex gap-2",children:r.jsx(Te,{loaders:R})}),e[26]=R,e[27]=C):C=e[27];let A;e[28]!==s.categories?(A=q(s.categories),e[28]=s.categories,e[29]=A):A=e[29];let $;e[30]!==A?($=r.jsx(tt,{categories:A}),e[30]=A,e[31]=$):$=e[31];let U;e[32]!==s.minecraft_versions?(U=u(s.minecraft_versions),e[32]=s.minecraft_versions,e[33]=U):U=e[33];let O;e[34]!==U?(O=r.jsx(it,{versions:U}),e[34]=U,e[35]=O):O=e[35];let I;e[36]!==B||e[37]!==C||e[38]!==$||e[39]!==O?(I=r.jsxs("div",{className:"flex-1",children:[B,C,$,O]}),e[36]=B,e[37]=C,e[38]=$,e[39]=O,e[40]=I):I=e[40];let D;e[41]!==s.authors||e[42]!==s.claimed_by||e[43]!==s.downloads?(D=r.jsx(nt,{authors:s.authors,downloads:s.downloads,claimed_by:s.claimed_by}),e[41]=s.authors,e[42]=s.claimed_by,e[43]=s.downloads,e[44]=D):D=e[44];const W=s.slug;let P;e[45]!==c?(P=c.includes("curseforge"),e[45]=c,e[46]=P):P=e[46];let M;e[47]!==c?(M=c.includes("modrinth"),e[47]=c,e[48]=M):M=e[48];let F;e[49]!==s.slug||e[50]!==P||e[51]!==M?(F=r.jsx(We,{slug:W,curseforge:P,modrinth:M}),e[49]=s.slug,e[50]=P,e[51]=M,e[52]=F):F=e[52];let L;e[53]!==I||e[54]!==D||e[55]!==F?(L=r.jsxs(Ee,{className:"flex flex-1 flex-col gap-3",children:[I,D,F]}),e[53]=I,e[54]=D,e[55]=F,e[56]=L):L=e[56];let Q;e[57]!==l||e[58]!==L?(Q=r.jsx(Se,{asChild:!0,children:r.jsxs(Pe,{className:"flex h-full flex-col overflow-hidden hover:shadow-xs",children:[l,L]})}),e[57]=l,e[58]=L,e[59]=Q):Q=e[59];let k;e[60]!==s?(k=o&&r.jsx(Ce,{side:"right",className:"bg-surface-2 max-h-96 max-w-lg overflow-auto border p-4",children:r.jsxs("div",{className:"text-xs",children:[r.jsx("div",{className:"mb-2 font-semibold",children:"Raw Addon Data (Debug):"}),r.jsx("pre",{className:"font-mono text-xs whitespace-pre-wrap",children:E(s)})]})}),e[60]=s,e[61]=k):k=e[61];let V;return e[62]!==Q||e[63]!==k?(V=r.jsx(we,{delayDuration:500,children:r.jsxs(Ne,{open:o?void 0:!1,children:[Q,k]})}),e[62]=Q,e[63]=k,e[64]=V):V=e[64],V},ct=S.memo(ot);function ut(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ft(t){if(t.name)return t.name;if(t.modrinth_raw_parsed&&typeof t.modrinth_raw_parsed=="object"&&"title"in t.modrinth_raw_parsed)return t.modrinth_raw_parsed.title;if(t.curseforge_raw_parsed&&typeof t.curseforge_raw_parsed=="object"&&"name"in t.curseforge_raw_parsed)return t.curseforge_raw_parsed.name;if(typeof t.modrinth_raw=="string")try{const e=JSON.parse(t.modrinth_raw);if(e.title)return e.title}catch{}if(typeof t.curseforge_raw=="string")try{const e=JSON.parse(t.curseforge_raw);if(e.name)return e.name}catch{}return t.slug?t.slug.split("-").map(ut).join(" "):"Unknown Addon"}function dt(t){return t.trim()}function mt(t){return t.length>0}function ht(t){return t?Array.isArray(t)?t:typeof t=="string"?t.split(",").map(dt).filter(mt):[]:[]}function pt(t){return t.trim()}function gt(t){return t.length>0}function bt(t){return t?Array.isArray(t)?t:typeof t=="string"?t.split(",").map(pt).filter(gt):[]:[]}function xt(t){return t.trim()}function vt(t){return t.length>0}function _t(t){return t?Array.isArray(t)?t:typeof t=="string"?t.split(",").map(xt).filter(vt):[]:[]}const be={categories:[],loaders:[],minecraft_versions:[],authors:[],sort:"relevance"},_e=[{value:"relevance",label:"Relevance"},{value:"downloads:desc",label:"Most Downloaded"},{value:"downloads:asc",label:"Least Downloaded"},{value:"updated_at:desc",label:"Recently Updated"},{value:"created_at:desc",label:"Recently Added"},{value:"name:asc",label:"Name (A-Z)"},{value:"name:desc",label:"Name (Z-A)"}],jt=[{id:"popular-tech",name:"Popular Tech Mods",description:"Most downloaded technology mods",filters:{categories:["tech","industrial","automation"],sort:"downloads:desc"},icon:"âš™ï¸"},{id:"latest-magic",name:"Latest Magic Mods",description:"Recently updated magic mods",filters:{categories:["magic","enchantment","alchemy"],sort:"updated_at:desc"},icon:"âœ¨"},{id:"adventure-content",name:"Adventure Content",description:"Exploration and dungeon mods",filters:{categories:["adventure","exploration","dungeons","structures"],sort:"downloads:desc"},icon:"ðŸ—ºï¸"},{id:"performance",name:"Performance Mods",description:"Optimization and performance improvements",filters:{categories:["utility","performance","optimization"],sort:"downloads:desc"},icon:"âš¡"}],yt={Latest:["1.21.1","1.21","1.20.6","1.20.4","1.20.1"],LTS:["1.19.2","1.18.2","1.16.5","1.12.2"],Legacy:["1.7.10","1.6.4","1.5.2","1.4.7"]},wt=t=>{const e=ee.c(11),{onApplyPreset:s}=t,[i,a]=S.useState(!1);let c;e[0]!==s?(c=p=>{s(p),a(!1)},e[0]=s,e[1]=c):c=e[1];const d=c;let m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(Me,{asChild:!0,children:r.jsxs($e,{variant:"outline",size:"sm",className:"gap-2",children:[r.jsx(Ve,{className:"h-4 w-4"}),"Quick Filters"]})}),e[2]=m):m=e[2];let n;e[3]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsxs(Re,{children:[r.jsx(Ue,{children:"Quick Filter Presets"}),r.jsx(Ie,{children:"Select a preset to quickly filter addons by popular categories"})]}),e[3]=n):n=e[3];let w;e[4]!==d?(w=jt.map(p=>r.jsxs("button",{onClick:()=>d(p),className:"hover:bg-accent flex items-start gap-3 rounded-lg border p-4 text-left transition-colors",children:[r.jsx("span",{className:"text-2xl",children:p.icon}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:p.name}),p.description&&r.jsx("div",{className:"text-muted-foreground text-sm",children:p.description})]})]},p.id)),e[4]=d,e[5]=w):w=e[5];let y;e[6]!==w?(y=r.jsxs(Qe,{className:"sm:max-w-[425px]",children:[n,r.jsx("div",{className:"grid gap-3 py-4",children:w})]}),e[6]=w,e[7]=y):y=e[7];let v;return e[8]!==i||e[9]!==y?(v=r.jsxs(qe,{open:i,onOpenChange:a,children:[m,y]}),e[8]=i,e[9]=y,e[10]=v):v=e[10],v},Nt=t=>{const e=ee.c(101),{filters:s,facets:i,onFilterChange:a,onClearFilters:c,onApplyPreset:d}=t;let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m={categories:!1,loaders:!1,versions:!1,authors:!1},e[0]=m):m=e[0];const[n,w]=S.useState(m);let y;e[1]===Symbol.for("react.memo_cache_sentinel")?(y=b=>{w(x=>({...x,[b]:!x[b]}))},e[1]=y):y=e[1];const v=y;let p;e[2]!==s.authors||e[3]!==s.categories||e[4]!==s.loaders||e[5]!==s.minecraft_versions||e[6]!==s.sort?(p=()=>{const b=[];if(s.categories.forEach(x=>{b.push({type:"category",value:x,label:`Category: ${x}`})}),s.loaders.forEach(x=>{b.push({type:"loader",value:x,label:`Loader: ${x}`})}),s.minecraft_versions.forEach(x=>{b.push({type:"version",value:x,label:`Version: ${x}`})}),s.authors.forEach(x=>{b.push({type:"author",value:x,label:`Author: ${x}`})}),s.sort&&s.sort!=="relevance"){const x=_e.find(T=>T.value===s.sort)?.label||s.sort;b.push({type:"sort",value:s.sort,label:`Sort: ${x}`})}return b},e[2]=s.authors,e[3]=s.categories,e[4]=s.loaders,e[5]=s.minecraft_versions,e[6]=s.sort,e[7]=p):p=e[7];const E=p;let G;e[8]!==s.authors||e[9]!==s.categories||e[10]!==s.loaders||e[11]!==s.minecraft_versions||e[12]!==a?(G=(b,x)=>{e:switch(b){case"category":{a("categories",s.categories.filter(T=>T!==x));break e}case"loader":{a("loaders",s.loaders.filter(T=>T!==x));break e}case"version":{a("minecraft_versions",s.minecraft_versions.filter(T=>T!==x));break e}case"author":{a("authors",s.authors.filter(T=>T!==x));break e}case"sort":a("sort","relevance")}},e[8]=s.authors,e[9]=s.categories,e[10]=s.loaders,e[11]=s.minecraft_versions,e[12]=a,e[13]=G):G=e[13];const q=G;let u;e[14]!==E?(u=E(),e[14]=E,e[15]=u):u=e[15];const o=u;let g;e[16]!==i?(g=()=>i?.categories&&Object.keys(i.categories).length>0?Object.entries(i.categories).filter(St).map($t).sort(Dt):[{value:"tech",label:"Tech"},{value:"industrial",label:"Industrial"},{value:"automation",label:"Automation"},{value:"energy",label:"Energy"},{value:"magic",label:"Magic"},{value:"adventure",label:"Adventure"},{value:"decoration",label:"Decoration"},{value:"utility",label:"Utility"},{value:"worldgen",label:"World Gen"}],e[16]=i,e[17]=g):g=e[17];const f=g;let h;e[18]!==i?(h=()=>i?.loaders&&Object.keys(i.loaders).length>0?Object.entries(i.loaders).filter(Ft).map(At).sort(Ot):[{value:"Forge",label:"Forge"},{value:"Fabric",label:"Fabric"},{value:"NeoForge",label:"NeoForge"},{value:"Quilt",label:"Quilt"}],e[18]=i,e[19]=h):h=e[19];const j=h;let N;e[20]!==i?(N=()=>i?.minecraft_versions&&Object.keys(i.minecraft_versions).length>0?Object.entries(i.minecraft_versions).filter(Lt).map(kt).sort(Tt):[{value:"1.21.1",label:"1.21.1"},{value:"1.21",label:"1.21"},{value:"1.20.6",label:"1.20.6"},{value:"1.20.4",label:"1.20.4"},{value:"1.20.1",label:"1.20.1"},{value:"1.19.2",label:"1.19.2"},{value:"1.18.2",label:"1.18.2"},{value:"1.16.5",label:"1.16.5"},{value:"1.12.2",label:"1.12.2"}],e[20]=i,e[21]=N):N=e[21];const l=N;let B;e[22]!==i?(B=()=>i?.authors&&Object.keys(i.authors).length>0?Object.entries(i.authors).slice(0,50).map(Et):[],e[22]=i,e[23]=B):B=e[23];const R=B;let C;e[24]!==d?(C=d&&r.jsx("div",{className:"flex justify-center",children:r.jsx(wt,{onApplyPreset:d})}),e[24]=d,e[25]=C):C=e[25];let A;e[26]!==o||e[27]!==c||e[28]!==q?(A=o.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h3",{className:"text-sm font-medium",children:["Active Filters (",o.length,")"]}),r.jsx($e,{variant:"ghost",size:"sm",onClick:c,className:"h-6 px-2 text-xs",children:"Clear All"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:o.map((b,x)=>r.jsx(Be,{label:b.label,onRemove:()=>q(b.type,b.value)},`${b.type}-${b.value}-${x}`))})]}),e[26]=o,e[27]=c,e[28]=q,e[29]=A):A=e[29];let $;e[30]===Symbol.for("react.memo_cache_sentinel")?($=r.jsx("label",{className:"text-sm font-medium",children:"Sort By"}),e[30]=$):$=e[30];const U=s.sort||"relevance";let O;e[31]!==a?(O=b=>a("sort",b.target.value),e[31]=a,e[32]=O):O=e[32];let I;e[33]===Symbol.for("react.memo_cache_sentinel")?(I=_e.map(Pt),e[33]=I):I=e[33];let D;e[34]!==U||e[35]!==O?(D=r.jsxs("div",{className:"space-y-2",children:[$,r.jsx(ze,{className:"h-10 w-full rounded-md border",children:r.jsx("select",{value:U,onChange:O,className:"bg-background w-full border-0 px-3 py-2 text-sm focus:outline-none",children:I})})]}),e[34]=U,e[35]=O,e[36]=D):D=e[36];const W=n.categories;let P;e[37]===Symbol.for("react.memo_cache_sentinel")?(P=()=>v("categories"),e[37]=P):P=e[37];let M;e[38]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsx("span",{className:"text-sm font-medium",children:"Categories"}),e[38]=M):M=e[38];let F;e[39]!==n.categories?(F=r.jsxs(fe,{onClick:P,className:"hover:bg-accent cursor-pointer flex w-full items-center justify-between rounded-md px-2 py-1",children:[M,n.categories?r.jsx(de,{className:"h-4 w-4"}):r.jsx(me,{className:"h-4 w-4"})]}),e[39]=n.categories,e[40]=F):F=e[40];let L;e[41]!==f?(L=f(),e[41]=f,e[42]=L):L=e[42];let Q;e[43]!==s.categories||e[44]!==a?(Q=b=>{const x=s.categories.includes(b)?s.categories.filter(T=>T!==b):[...s.categories,b];a("categories",x)},e[43]=s.categories,e[44]=a,e[45]=Q):Q=e[45];let k;e[46]!==s.categories||e[47]!==L||e[48]!==Q?(k=r.jsx(he,{className:"pt-2",children:r.jsx(pe,{options:L,selectedValues:s.categories,onToggle:Q,searchable:!0,placeholder:"Search categories..."})}),e[46]=s.categories,e[47]=L,e[48]=Q,e[49]=k):k=e[49];let V;e[50]!==n.categories||e[51]!==F||e[52]!==k?(V=r.jsxs(ge,{open:W,children:[F,k]}),e[50]=n.categories,e[51]=F,e[52]=k,e[53]=V):V=e[53];const _=n.loaders;let H;e[54]===Symbol.for("react.memo_cache_sentinel")?(H=()=>v("loaders"),e[54]=H):H=e[54];let X;e[55]===Symbol.for("react.memo_cache_sentinel")?(X=r.jsx("span",{className:"text-sm font-medium",children:"Mod Loaders"}),e[55]=X):X=e[55];let z;e[56]!==n.loaders?(z=r.jsxs(fe,{onClick:H,className:"hover:bg-accent cursor-pointer flex w-full items-center justify-between rounded-md px-2 py-1",children:[X,n.loaders?r.jsx(de,{className:"h-4 w-4"}):r.jsx(me,{className:"h-4 w-4"})]}),e[56]=n.loaders,e[57]=z):z=e[57];let J;e[58]!==j?(J=j(),e[58]=j,e[59]=J):J=e[59];let Z;e[60]!==s.loaders||e[61]!==a?(Z=b=>{const x=s.loaders.includes(b)?s.loaders.filter(T=>T!==b):[...s.loaders,b];a("loaders",x)},e[60]=s.loaders,e[61]=a,e[62]=Z):Z=e[62];let K;e[63]!==s.loaders||e[64]!==J||e[65]!==Z?(K=r.jsx(he,{className:"pt-2",children:r.jsx(pe,{options:J,selectedValues:s.loaders,onToggle:Z})}),e[63]=s.loaders,e[64]=J,e[65]=Z,e[66]=K):K=e[66];let Y;e[67]!==n.loaders||e[68]!==z||e[69]!==K?(Y=r.jsxs(ge,{open:_,children:[z,K]}),e[67]=n.loaders,e[68]=z,e[69]=K,e[70]=Y):Y=e[70];const oe=n.versions;let te;e[71]===Symbol.for("react.memo_cache_sentinel")?(te=()=>v("versions"),e[71]=te):te=e[71];let ce;e[72]===Symbol.for("react.memo_cache_sentinel")?(ce=r.jsx("span",{className:"text-sm font-medium",children:"Minecraft Versions"}),e[72]=ce):ce=e[72];let se;e[73]!==n.versions?(se=r.jsxs(fe,{onClick:te,className:"hover:bg-accent cursor-pointer flex w-full items-center justify-between rounded-md px-2 py-1",children:[ce,n.versions?r.jsx(de,{className:"h-4 w-4"}):r.jsx(me,{className:"h-4 w-4"})]}),e[73]=n.versions,e[74]=se):se=e[74];let re;e[75]!==l?(re=l(),e[75]=l,e[76]=re):re=e[76];let ae;e[77]!==s.minecraft_versions||e[78]!==a?(ae=b=>{const x=s.minecraft_versions.includes(b)?s.minecraft_versions.filter(T=>T!==b):[...s.minecraft_versions,b];a("minecraft_versions",x)},e[77]=s.minecraft_versions,e[78]=a,e[79]=ae):ae=e[79];let ie;e[80]!==s.minecraft_versions||e[81]!==re||e[82]!==ae?(ie=r.jsx(he,{className:"pt-2",children:r.jsx(pe,{options:re,selectedValues:s.minecraft_versions,onToggle:ae,searchable:!0,placeholder:"Search versions...",grouped:!0,groups:yt})}),e[80]=s.minecraft_versions,e[81]=re,e[82]=ae,e[83]=ie):ie=e[83];let le;e[84]!==n.versions||e[85]!==se||e[86]!==ie?(le=r.jsxs(ge,{open:oe,children:[se,ie]}),e[84]=n.versions,e[85]=se,e[86]=ie,e[87]=le):le=e[87];let ne;e[88]!==n.authors||e[89]!==s.authors||e[90]!==R||e[91]!==a?(ne=R().length>0&&r.jsxs(ge,{open:n.authors,children:[r.jsxs(fe,{onClick:()=>v("authors"),className:"hover:bg-accent cursor-pointer flex w-full items-center justify-between rounded-md px-2 py-1",children:[r.jsx("span",{className:"text-sm font-medium",children:"Authors"}),n.authors?r.jsx(de,{className:"h-4 w-4"}):r.jsx(me,{className:"h-4 w-4"})]}),r.jsx(he,{className:"pt-2",children:r.jsx(pe,{options:R(),selectedValues:s.authors,onToggle:b=>{const x=s.authors.includes(b)?s.authors.filter(T=>T!==b):[...s.authors,b];a("authors",x)},searchable:!0,placeholder:"Search authors..."})})]}),e[88]=n.authors,e[89]=s.authors,e[90]=R,e[91]=a,e[92]=ne):ne=e[92];let ue;return e[93]!==C||e[94]!==A||e[95]!==D||e[96]!==V||e[97]!==Y||e[98]!==le||e[99]!==ne?(ue=r.jsxs("div",{className:"space-y-4",children:[C,A,D,V,Y,le,ne]}),e[93]=C,e[94]=A,e[95]=D,e[96]=V,e[97]=Y,e[98]=le,e[99]=ne,e[100]=ue):ue=e[100],ue};function St(t){const[e,s]=t;return e&&e.length>1&&!e.includes(",")&&!e.includes("null")&&!e.includes("undefined")&&s>0}function Ct(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}function $t(t){const[e,s]=t,i=e.split(/[-_]/).map(Ct).join(" ");return{value:e,label:i,count:s}}function Dt(t,e){return e.count-t.count}function Ft(t){const[e,s]=t;return e&&e.length>1&&!e.includes(",")&&!e.includes("null")&&!e.includes("undefined")&&s>0}function At(t){const[e,s]=t;return{value:e,label:e,count:s}}function Ot(t,e){return e.count-t.count}function Lt(t){const[e,s]=t;return e&&e.match(/^\d+\.\d+(\.\d+)?$/)&&!e.includes(",")&&s>0}function kt(t){const[e,s]=t;return{value:e,label:e,count:s}}function Tt(t,e){const s=t.value.split(".").map(Number),i=e.value.split(".").map(Number);for(let a=0;a<Math.max(s.length,i.length);a++){const c=s[a]||0,d=i[a]||0;if(c!==d)return d-c}return 0}function Et(t){const[e,s]=t;return{value:e,label:e,count:s}}function Pt(t){return r.jsx("option",{value:t.value,children:t.label},t.value)}const Mt=()=>{const[t,e]=Ge(),[s,i]=S.useState(()=>Vt(t)),[a,c]=S.useState(""),{data:d}=ve({queryKey:["all-addon-facets"],queryFn:async()=>{try{const o=await xe.index("addons").search("*",{facets:["categories","loaders","minecraft_versions","authors"],filter:"isValid = true",limit:0,attributesToRetrieve:[]}),g={};if(o.facetDistribution?.categories){const f={};Object.entries(o.facetDistribution.categories).forEach(([h,j])=>{h.split(",").map(l=>l.trim()).filter(l=>l).forEach(l=>{f[l]=(f[l]||0)+j})}),g.categories=f}if(o.facetDistribution?.loaders){const f={};Object.entries(o.facetDistribution.loaders).forEach(([h,j])=>{h.split(",").map(l=>l.trim()).filter(l=>l).forEach(l=>{f[l]=(f[l]||0)+j})}),g.loaders=f}if(o.facetDistribution?.minecraft_versions){const f={};Object.entries(o.facetDistribution.minecraft_versions).forEach(([h,j])=>{h.split(",").map(l=>l.trim()).filter(l=>l).forEach(l=>{f[l]=(f[l]||0)+j})}),g.minecraft_versions=f}return o.facetDistribution?.authors&&(g.authors=o.facetDistribution.authors),g}catch(u){return console.warn("Failed to fetch all facets:",u),{}}},staleTime:600*1e3,retry:!1}),{data:m,isLoading:n}=ve({queryKey:["addon-facets",s,a],queryFn:async()=>{try{const o=await xe.index("addons").search("*",{facets:["categories","loaders","minecraft_versions","authors"],filter:"isValid = true",limit:0,attributesToRetrieve:[]}),g={};if(o.facetDistribution?.categories){const f={};Object.entries(o.facetDistribution.categories).forEach(([h,j])=>{h.split(",").map(l=>l.trim()).filter(l=>l).forEach(l=>{f[l]=(f[l]||0)+j})}),g.categories=f}if(o.facetDistribution?.loaders){const f={};Object.entries(o.facetDistribution.loaders).forEach(([h,j])=>{h.split(",").map(l=>l.trim()).filter(l=>l).forEach(l=>{f[l]=(f[l]||0)+j})}),g.loaders=f}if(o.facetDistribution?.minecraft_versions){const f={};Object.entries(o.facetDistribution.minecraft_versions).forEach(([h,j])=>{h.split(",").map(l=>l.trim()).filter(l=>l).forEach(l=>{f[l]=(f[l]||0)+j})}),g.minecraft_versions=f}return o.facetDistribution?.authors&&(g.authors=o.facetDistribution.authors),g}catch(u){return console.warn("Failed to fetch facets, using fallback options:",u),{}}},staleTime:300*1e3,retry:!1}),w=S.useMemo(()=>{const u=[];if(u.push("isValid = true"),s.categories.length>0){const o=s.categories.map(g=>`categories = "${g}"`).join(" OR ");u.push(`(${o})`)}if(s.loaders.length>0){const o=s.loaders.map(g=>`loaders = "${g}"`).join(" OR ");u.push(`(${o})`)}if(s.minecraft_versions.length>0){const o=s.minecraft_versions.map(g=>`minecraft_versions = "${g}"`).join(" OR ");u.push(`(${o})`)}if(s.authors.length>0){const o=s.authors.map(g=>`authors = "${g}"`).join(" OR ");u.push(`(${o})`)}if(s.downloads&&(s.downloads.min!==void 0&&u.push(`downloads >= ${s.downloads.min}`),s.downloads.max!==void 0&&u.push(`downloads <= ${s.downloads.max}`)),s.lastUpdated){if(s.lastUpdated.from){const o=Math.floor(s.lastUpdated.from.getTime()/1e3);u.push(`updated_at >= ${o}`)}if(s.lastUpdated.to){const o=Math.floor(s.lastUpdated.to.getTime()/1e3);u.push(`updated_at <= ${o}`)}}return u.join(" AND ")},[s]),y=S.useCallback((u,o)=>{i(g=>({...g,[u]:o}))},[]),v=S.useCallback((u,o)=>{i(g=>{const f=g[u],h=f.includes(o)?f.filter(j=>j!==o):[...f,o];return{...g,[u]:h}})},[]),p=S.useCallback(()=>{i(be),c("")},[]),E=S.useCallback(u=>{i(o=>({...be,...u.filters}))},[]),G=S.useMemo(()=>s.categories.length>0||s.loaders.length>0||s.minecraft_versions.length>0||s.authors.length>0||s.downloads!==void 0||s.lastUpdated!==void 0||a!=="",[s,a]),q=S.useMemo(()=>{let u=0;return s.categories.length>0&&(u+=s.categories.length),s.loaders.length>0&&(u+=s.loaders.length),s.minecraft_versions.length>0&&(u+=s.minecraft_versions.length),s.authors.length>0&&(u+=s.authors.length),s.downloads&&u++,s.lastUpdated&&u++,u},[s]);return S.useEffect(()=>{const u=Rt(s,a);e(u,{replace:!0})},[s,a,e]),{filters:s,facets:m,allFacets:d,facetsLoading:n,filterString:w,searchQuery:a,setSearchQuery:c,updateFilter:y,toggleFilterValue:v,clearFilters:p,applyPreset:E,hasActiveFilters:G,activeFilterCount:q}};function Vt(t){const e={...be},s=t.get("cat");s&&(e.categories=s.split(","));const i=t.get("loader");i&&(e.loaders=i.split(","));const a=t.get("v");a&&(e.minecraft_versions=a.split(","));const c=t.get("author");c&&(e.authors=c.split(","));const d=t.get("sort");d&&(e.sort=d);const m=t.get("min_dl"),n=t.get("max_dl");return(m||n)&&(e.downloads={min:m?parseInt(m):void 0,max:n?parseInt(n):void 0}),e}function Rt(t,e){const s=new URLSearchParams;return e&&s.set("q",e),t.categories.length>0&&s.set("cat",t.categories.join(",")),t.loaders.length>0&&s.set("loader",t.loaders.join(",")),t.minecraft_versions.length>0&&s.set("v",t.minecraft_versions.join(",")),t.authors.length>0&&s.set("author",t.authors.join(",")),t.sort&&t.sort!=="relevance"&&s.set("sort",t.sort),t.downloads?.min!==void 0&&s.set("min_dl",t.downloads.min.toString()),t.downloads?.max!==void 0&&s.set("max_dl",t.downloads.max.toString()),s}const Ut=()=>{const t=ee.c(47),[e,s]=S.useState(1);let i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=[],t[0]=i):i=t[0];const[a,c]=S.useState(i);let d;t[1]===Symbol.for("react.memo_cache_sentinel")?(d={identifier:"",page:0},t[1]=d):d=t[1];const m=S.useRef(d),{filters:n,facets:w,allFacets:y,filterString:v,searchQuery:p,setSearchQuery:E,updateFilter:G,clearFilters:q,applyPreset:u,hasActiveFilters:o,activeFilterCount:g}=Mt();let f;t[2]!==v||t[3]!==n.sort||t[4]!==e||t[5]!==p?(f={query:p,page:e,filterString:v,sort:n.sort,limit:16,includeFacets:!0},t[2]=v,t[3]=n.sort,t[4]=e,t[5]=p,t[6]=f):f=t[6];const{data:h,isLoading:j,isFetching:N,hasNextPage:l,facetDistribution:B}=Ze(f);let R;e:{if(!h||h.length===0){R="";break e}let Z;t[7]!==h?(Z=h.map(It).join(","),t[7]=h,t[8]=Z):Z=t[8],R=Z}const C=R,A=j||N;let $;t[9]!==l||t[10]!==N?($=()=>{l&&!N&&s(Qt)},t[9]=l,t[10]=N,t[11]=$):$=t[11];let U;t[12]!==l||t[13]!==A||t[14]!==$?(U={loading:A,hasMore:l,onLoadMore:$},t[12]=l,t[13]=A,t[14]=$,t[15]=U):U=t[15];const{sentinelRef:O,loadingMore:I}=Je(U);let D;t[16]===Symbol.for("react.memo_cache_sentinel")?(D=()=>{c([]),s(1),m.current={identifier:"",page:0}},t[16]=D):D=t[16];let W;t[17]!==v||t[18]!==n.sort||t[19]!==p?(W=[v,p,n.sort],t[17]=v,t[18]=n.sort,t[19]=p,t[20]=W):W=t[20],S.useEffect(D,W);let P,M;t[21]!==h||t[22]!==C||t[23]!==e?(M=()=>{!h||h.length===0||!C||m.current.identifier===C&&m.current.page===e||(m.current={identifier:C,page:e},c(e===1?h:K=>{const Y=new Set(K.map(qt)),oe=h.filter(te=>!Y.has(te.$id));return oe.length>0?[...K,...oe]:K}))},P=[C,h,e],t[21]=h,t[22]=C,t[23]=e,t[24]=P,t[25]=M):(P=t[24],M=t[25]),S.useEffect(M,P);let F;t[26]!==q?(F=()=>{q(),s(1),c([])},t[26]=q,t[27]=F):F=t[27];const L=F,Q=Bt,k=y||B||w;let V;t[28]!==u||t[29]!==q||t[30]!==n||t[31]!==k||t[32]!==G?(V=r.jsx(Nt,{filters:n,facets:k,onFilterChange:G,onClearFilters:q,onApplyPreset:u}),t[28]=u,t[29]=q,t[30]=n,t[31]=k,t[32]=G,t[33]=V):V=t[33];const _=V,H=`Addon Filters${g>0?` (${g})`:""}`,X=j&&e===1;let z;t[34]!==a||t[35]!==I||t[36]!==O||t[37]!==X?(z=r.jsx(He,{items:a,renderItem:Q,isLoading:X,isError:!1,emptyMessage:"No addons found matching your filters.",infiniteScrollEnabled:!0,loadingMore:I,sentinelRef:O,animationEnabled:!0,animationDelay:.1,animationDuration:.4,staggerItemCount:16,skeletonCount:16}),t[34]=a,t[35]=I,t[36]=O,t[37]=X,t[38]=z):z=t[38];let J;return t[39]!==_||t[40]!==L||t[41]!==o||t[42]!==p||t[43]!==E||t[44]!==H||t[45]!==z?(J=r.jsx(Ke,{searchValue:p,onSearchChange:E,searchPlaceholder:"Search addons...",filters:_,onResetFilters:L,filterTitle:H,hasActiveFilters:o,children:z}),t[39]=_,t[40]=L,t[41]=o,t[42]=p,t[43]=E,t[44]=H,t[45]=z,t[46]=J):J=t[46],J};function It(t){return t.$id}function Qt(t){return t+1}function qt(t){return t.$id}function Bt(t){return r.jsx(ct,{addon:t},t.$id)}function Wt(){const t=ee.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(Ut,{}),t[0]=e):e=t[0],e}export{Wt as default};
