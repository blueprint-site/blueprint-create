import{r as j,j as n}from"./radix-B53Irp0y.js";import{c as R,C as A,a as T,M as G,b as w,B as H,d as U,L as q,e as z,f as J,u as K,g as O,I as Q}from"./index-BYSF1fK8.js";import{L as W}from"./ListPageLayout-C4BKsBGA.js";import"./tanstack-BnyC6HL-.js";import"./animation-DCGi2G0G.js";function X(t){const e=R.c(10);let s;e[0]!==t?(s=t===void 0?{}:t,e[0]=t,e[1]=s):s=e[1];const{initialSearchValue:f,onFilterChange:a}=s,m=f===void 0?"":f,[r,l]=j.useState(m);let c;e[2]!==a?(c=u=>{l(u),a?.()},e[2]=a,e[3]=c):c=e[3];const d=c;let o;e[4]!==a?(o=()=>{l(""),a?.()},e[4]=a,e[5]=o):o=e[5];const h=o;let i;return e[6]!==d||e[7]!==h||e[8]!==r?(i={searchValue:r,handleSearchChange:d,resetFilters:h},e[6]=d,e[7]=h,e[8]=r,e[9]=i):i=e[9],i}const Y=t=>{const e=R.c(28),{blog:s}=t;let f;e[0]!==s.img_url||e[1]!==s.title?(f=n.jsx("img",{src:s.img_url,alt:s.title,className:"aspect-16/9 object-contain"}),e[0]=s.img_url,e[1]=s.title,e[2]=f):f=e[2];let a;e[3]!==s.title?(a=n.jsx(A,{className:"text-2xl font-bold",children:s.title}),e[3]=s.title,e[4]=a):a=e[4];let m;e[5]!==s.tags?(m=s.tags||[],e[5]=s.tags,e[6]=m):m=e[6];let r;e[7]!==m?(r=n.jsx(w,{children:n.jsx(H,{value:m})}),e[7]=m,e[8]=r):r=e[8];let l;e[9]!==f||e[10]!==a||e[11]!==r?(l=n.jsxs(U,{children:[f,a,r]}),e[9]=f,e[10]=a,e[11]=r,e[12]=l):l=e[12];let c;e[13]!==s.content?(c=n.jsx(T,{className:"flex-grow overflow-hidden",children:n.jsx(G,{content:s.content,className:"line-clamp-[7] text-ellipsis"})}),e[13]=s.content,e[14]=c):c=e[14];let d;e[15]!==s.authors?(d=s.authors.map(Z),e[15]=s.authors,e[16]=d):d=e[16];let o;e[17]!==d?(o=n.jsx(w,{className:"text-foreground-muted",children:d}),e[17]=d,e[18]=o):o=e[18];const h=`/blog/${s.$id}/${s.slug}`;let i;e[19]!==h?(i=n.jsx(q,{to:h,className:"text-blue-500 hover:text-blue-700",children:"Read more..."}),e[19]=h,e[20]=i):i=e[20];let u;e[21]!==i||e[22]!==o?(u=n.jsxs(z,{className:"mt-auto flex justify-end",children:[o,i]}),e[21]=i,e[22]=o,e[23]=u):u=e[23];let g;return e[24]!==u||e[25]!==l||e[26]!==c?(g=n.jsxs(J,{className:"bg-surface-1 flex h-[450px] flex-col",children:[l,c,u]}),e[24]=u,e[25]=l,e[26]=c,e[27]=g):g=e[27],g};function Z(t,e){return n.jsx("div",{children:t},e)}const re=()=>{const t=R.c(30),[e,s]=j.useState(1);let f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],t[0]=f):f=t[0];const[a,m]=j.useState(f);let r;t[1]===Symbol.for("react.memo_cache_sentinel")?(r={onFilterChange:()=>{s(1)}},t[1]=r):r=t[1];const{searchValue:l,handleSearchChange:c,resetFilters:d}=X(r),{data:o,isLoading:h,isFetching:i}=K(l,"all",e);o?.data;let u,g;t[2]!==o?.data?(g=o?.data||[],t[2]=o?.data,t[3]=g):g=t[3],u=g;const b=u,x=o?.hasNextPage||!1,V=ee;let S;t[4]!==x||t[5]!==i?(S=()=>{x&&!i&&s(te)},t[4]=x,t[5]=i,t[6]=S):S=t[6];const L=S,$=h||i;let _;t[7]!==L||t[8]!==x||t[9]!==$?(_={loading:$,hasMore:x,onLoadMore:L},t[7]=L,t[8]=x,t[9]=$,t[10]=_):_=t[10];const{sentinelRef:E,loadingMore:M}=O(_);let C;t[11]===Symbol.for("react.memo_cache_sentinel")?(C=()=>{m([]),s(1)},t[11]=C):C=t[11];let N;t[12]!==l?(N=[l],t[12]=l,t[13]=N):N=t[13],j.useEffect(C,N);let F,y;t[14]!==b||t[15]!==e?(y=()=>{if(b?.length){const I=V(b);m(k=>e===1?I:[...k,...I])}},F=[b,e,V],t[14]=b,t[15]=e,t[16]=F,t[17]=y):(F=t[16],y=t[17]),j.useEffect(y,F);const P=l!=="";let B;t[18]===Symbol.for("react.memo_cache_sentinel")?(B=n.jsx("div",{className:"text-muted-foreground text-sm",children:"Use the search bar above to find blog posts by title or content."}),t[18]=B):B=t[18];const D=B;let p;t[19]!==a||t[20]!==h||t[21]!==M||t[22]!==E?(p=n.jsx(Q,{items:a,renderItem:se,isLoading:h,isError:!1,emptyMessage:"No blog posts found.",infiniteScrollEnabled:!0,loadingMore:M,sentinelRef:E}),t[19]=a,t[20]=h,t[21]=M,t[22]=E,t[23]=p):p=t[23];let v;return t[24]!==c||t[25]!==P||t[26]!==d||t[27]!==l||t[28]!==p?(v=n.jsx(W,{searchValue:l,onSearchChange:c,searchPlaceholder:"Search blog posts...",filters:D,onResetFilters:d,filterTitle:"Blog Filters",hasActiveFilters:P,children:p}),t[24]=c,t[25]=P,t[26]=d,t[27]=l,t[28]=p,t[29]=v):v=t[29],v};function ee(t){return t?.length?t:[]}function te(t){return t+1}function se(t){return n.jsx(Y,{blog:t},t.$id)}export{re as default};
