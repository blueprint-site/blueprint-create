import{r as F,j as s}from"./radix-x8H_F-uE.js";import{c as J,i as Y,U as ne,D as ae,g as ie,d as oe,a as ce,f as fe}from"./index-c6xvjn-C.js";import{u as me}from"./useSearchAddons-MlYskybo.js";import{u as ue,I as pe,L as ge}from"./ListPageLayout-C6eHoJX7.js";import{S as X}from"./SelectFilter-CfiMKCm-.js";import{a as he,e as Z,M as de}from"./ModLoaders-BtOgJ42s.js";import{b as ee,c as te,T as re,a as se}from"./tooltip-hp9rnvlC.js";import{B as xe}from"./badge-check-6re0usLw.js";import{M as _e}from"./ModPageLinks-HKvYQACg.js";import{u as be}from"./useListPageFilters--SdUVsKj.js";import"./tanstack-aN5NUOUd.js";import"./animation-RShxBXpy.js";import"./funnel-BAaMlUdJ.js";import"./DevinsBadges-J03TFzbO.js";const we=he.map(t=>t.value.toLowerCase()),ye=t=>t.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),je=t=>{const e=J.c(5),{categories:r}=t;let n,o;if(e[0]!==r){o=Symbol.for("react.early_return_sentinel");e:{const i=Z(r);if(i.length===0){o=null;break e}n=[...new Set(i.filter(Se).map(Ne))].map(ye)}e[0]=r,e[1]=n,e[2]=o}else n=e[1],o=e[2];if(o!==Symbol.for("react.early_return_sentinel"))return o;const l=n;if(l.length===0)return null;let c;return e[3]!==l?(c=s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:l.map(Ce)}),e[3]=l,e[4]=c):c=e[4],c},ve=F.memo(je);function Se(t){return!we.includes(t)}function Ne(t){return t.toLowerCase()}function Ce(t){return s.jsx(Y,{children:t},t)}const Ae=t=>{const e=J.c(7),{versions:r}=t;let n,o,l;if(e[0]!==r){l=Symbol.for("react.early_return_sentinel");e:{const i=Z(r);if(i.length===0){l=null;break e}n="mt-3 flex flex-wrap gap-1.5",o=i.map(Le)}e[0]=r,e[1]=n,e[2]=o,e[3]=l}else n=e[1],o=e[2],l=e[3];if(l!==Symbol.for("react.early_return_sentinel"))return l;let c;return e[4]!==n||e[5]!==o?(c=s.jsx("div",{className:n,children:o}),e[4]=n,e[5]=o,e[6]=c):c=e[6],c};function Le(t){return s.jsx(Y,{variant:"secondary",className:"px-1.5 py-0.5 font-mono text-xs",children:t},t)}const De=t=>{const e=J.c(18),{authors:r,downloads:n,claimed_by:o}=t;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(ne,{className:"h-3.5"}),e[0]=l):l=e[0];let c;e[1]!==r?(c=r&&r.length>0?r.join(", "):"Unknown",e[1]=r,e[2]=c):c=e[2];let i;e[3]!==c?(i=s.jsx("span",{className:"truncate",children:c}),e[3]=c,e[4]=i):i=e[4];let g;e[5]!==o?(g=o&&s.jsx(ee,{children:s.jsxs(te,{children:[s.jsx(re,{children:s.jsx("span",{className:"text-primary inline text-xs",children:s.jsx(xe,{className:"text-primary h-3.5"})})}),s.jsx(se,{children:"The addon has been verified and it is owned by that user"})]})}),e[5]=o,e[6]=g):g=e[6];let p;e[7]!==i||e[8]!==g?(p=s.jsxs("div",{className:"flex items-center gap-0.5 border-b pb-1",children:[l,i,g]}),e[7]=i,e[8]=g,e[9]=p):p=e[9];let h;e[10]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsx(ae,{className:"h-3.5"}),e[10]=h):h=e[10];let m;e[11]!==n?(m=n.toLocaleString(),e[11]=n,e[12]=m):m=e[12];let u;e[13]!==m?(u=s.jsxs("div",{className:"flex items-center gap-0.5 border-b pb-1",children:[h,s.jsx("span",{className:"mr-1",children:m})]}),e[13]=m,e[14]=u):u=e[14];let f;return e[15]!==p||e[16]!==u?(f=s.jsxs("div",{className:"text-foreground-muted mt-3 flex items-center justify-between text-xs",children:[p,u]}),e[15]=p,e[16]=u,e[17]=f):f=e[17],f},Fe=t=>{const e=J.c(65),{addon:r}=t,n=ie();let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],e[0]=o):o=e[0];const[l,c]=F.useState(o);let i,g;e[1]!==r.curseforge_raw||e[2]!==r.modrinth_raw?(i=()=>{const a=[];r.curseforge_raw&&a.push("curseforge"),r.modrinth_raw&&a.push("modrinth"),c(a)},g=[r.curseforge_raw,r.modrinth_raw],e[1]=r.curseforge_raw,e[2]=r.modrinth_raw,e[3]=i,e[4]=g):(i=e[3],g=e[4]),F.useEffect(i,g);const p=Me;let h;e[5]!==r.slug||e[6]!==n?(h=()=>{n(`/addons/${r.slug}`)},e[5]=r.slug,e[6]=n,e[7]=h):h=e[7];const m=h;let u;e[8]===Symbol.for("react.memo_cache_sentinel")?(u=a=>{const R={basicInfo:{name:a.name||"MISSING",displayName:p(a),slug:a.slug,authors:a.authors},rawDataInfo:{curseforge_raw_type:typeof a.curseforge_raw,curseforge_raw_length:typeof a.curseforge_raw=="string"?a.curseforge_raw.length:a.curseforge_raw?"object":"null",curseforge_raw_preview:typeof a.curseforge_raw=="string"?a.curseforge_raw.substring(0,100)+"...":a.curseforge_raw?"Object present":"null",modrinth_raw_type:typeof a.modrinth_raw,modrinth_raw_length:typeof a.modrinth_raw=="string"?a.modrinth_raw.length:a.modrinth_raw?"object":"null",modrinth_raw_preview:typeof a.modrinth_raw=="string"?a.modrinth_raw.substring(0,100)+"...":a.modrinth_raw?"Object present":"null"},fullData:a};return JSON.stringify(R,null,2)},e[8]=u):u=e[8];const f=u,G=Te,Q=Re,B=Ve,_=typeof window<"u"&&window.localStorage.getItem("debug")==="true",U=r.icon||"/assets/wrench.webp";let b;e[9]!==r?(b=p(r),e[9]=r,e[10]=b):b=e[10];let d;e[11]!==U||e[12]!==b?(d=s.jsx("img",{src:U,alt:b,loading:"lazy",className:"h-12 w-12 object-cover"}),e[11]=U,e[12]=b,e[13]=d):d=e[13];let $;e[14]!==r?($=p(r),e[14]=r,e[15]=$):$=e[15];let x;e[16]!==$?(x=s.jsx("h3",{className:"truncate text-sm font-medium",children:$}),e[16]=$,e[17]=x):x=e[17];let w;e[18]!==m||e[19]!==x||e[20]!==d?(w=s.jsxs(oe,{className:"relative flex cursor-pointer flex-row gap-3",onClick:m,children:[d,x]}),e[18]=m,e[19]=x,e[20]=d,e[21]=w):w=e[21];let O;e[22]!==r.description?(O=s.jsx("p",{className:"text-foreground-muted text-xs",children:r.description}),e[22]=r.description,e[23]=O):O=e[23];let M;e[24]!==r.loaders?(M=G(r.loaders),e[24]=r.loaders,e[25]=M):M=e[25];let y;e[26]!==M?(y=s.jsx("div",{className:"mt-2 flex gap-2",children:s.jsx(de,{loaders:M})}),e[26]=M,e[27]=y):y=e[27];let j;e[28]!==r.categories?(j=Q(r.categories),e[28]=r.categories,e[29]=j):j=e[29];let v;e[30]!==j?(v=s.jsx(ve,{categories:j}),e[30]=j,e[31]=v):v=e[31];let S;e[32]!==r.minecraft_versions?(S=B(r.minecraft_versions),e[32]=r.minecraft_versions,e[33]=S):S=e[33];let N;e[34]!==S?(N=s.jsx(Ae,{versions:S}),e[34]=S,e[35]=N):N=e[35];let E;e[36]!==O||e[37]!==y||e[38]!==v||e[39]!==N?(E=s.jsxs("div",{className:"flex-1",children:[O,y,v,N]}),e[36]=O,e[37]=y,e[38]=v,e[39]=N,e[40]=E):E=e[40];let I;e[41]!==r.authors||e[42]!==r.claimed_by||e[43]!==r.downloads?(I=s.jsx(De,{authors:r.authors,downloads:r.downloads,claimed_by:r.claimed_by}),e[41]=r.authors,e[42]=r.claimed_by,e[43]=r.downloads,e[44]=I):I=e[44];const H=r.slug;let C;e[45]!==l?(C=l.includes("curseforge"),e[45]=l,e[46]=C):C=e[46];let T;e[47]!==l?(T=l.includes("modrinth"),e[47]=l,e[48]=T):T=e[48];let A;e[49]!==r.slug||e[50]!==C||e[51]!==T?(A=s.jsx(_e,{slug:H,curseforge:C,modrinth:T}),e[49]=r.slug,e[50]=C,e[51]=T,e[52]=A):A=e[52];let P;e[53]!==E||e[54]!==I||e[55]!==A?(P=s.jsxs(ce,{className:"flex flex-1 flex-col gap-3",children:[E,I,A]}),e[53]=E,e[54]=I,e[55]=A,e[56]=P):P=e[56];let L;e[57]!==w||e[58]!==P?(L=s.jsx(re,{asChild:!0,children:s.jsxs(fe,{className:"flex h-full flex-col overflow-hidden hover:shadow-xs",children:[w,P]})}),e[57]=w,e[58]=P,e[59]=L):L=e[59];let k;e[60]!==r?(k=_&&s.jsx(se,{side:"right",className:"bg-surface-2 max-h-96 max-w-lg overflow-auto border p-4",children:s.jsxs("div",{className:"text-xs",children:[s.jsx("div",{className:"mb-2 font-semibold",children:"Raw Addon Data (Debug):"}),s.jsx("pre",{className:"font-mono text-xs whitespace-pre-wrap",children:f(r)})]})}),e[60]=r,e[61]=k):k=e[61];let D;return e[62]!==L||e[63]!==k?(D=s.jsx(ee,{delayDuration:500,children:s.jsxs(te,{open:_?void 0:!1,children:[L,k]})}),e[62]=L,e[63]=k,e[64]=D):D=e[64],D},$e=F.memo(Fe);function Oe(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Me(t){if(t.name)return t.name;if(t.modrinth_raw_parsed&&typeof t.modrinth_raw_parsed=="object"&&"title"in t.modrinth_raw_parsed)return t.modrinth_raw_parsed.title;if(t.curseforge_raw_parsed&&typeof t.curseforge_raw_parsed=="object"&&"name"in t.curseforge_raw_parsed)return t.curseforge_raw_parsed.name;if(typeof t.modrinth_raw=="string")try{const e=JSON.parse(t.modrinth_raw);if(e.title)return e.title}catch{}if(typeof t.curseforge_raw=="string")try{const e=JSON.parse(t.curseforge_raw);if(e.name)return e.name}catch{}return t.slug?t.slug.split("-").map(Oe).join(" "):"Unknown Addon"}function Ee(t){return t.trim()}function Ie(t){return t.length>0}function Te(t){return t?Array.isArray(t)?t:typeof t=="string"?t.split(",").map(Ee).filter(Ie):[]:[]}function Pe(t){return t.trim()}function ke(t){return t.length>0}function Re(t){return t?Array.isArray(t)?t:typeof t=="string"?t.split(",").map(Pe).filter(ke):[]:[]}function Be(t){return t.trim()}function Ue(t){return t.length>0}function Ve(t){return t?Array.isArray(t)?t:typeof t=="string"?t.split(",").map(Be).filter(Ue):[]:[]}const Je=()=>{const t=J.c(53),[e,r]=F.useState(1),[n,o]=F.useState(""),[l,c]=F.useState(""),[i,g]=F.useState("");let p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p=[],t[0]=p):p=t[0];const[h,m]=F.useState(p);let u;t[1]===Symbol.for("react.memo_cache_sentinel")?(u={onFilterChange:()=>{r(1),m([])}},t[1]=u):u=t[1];const{searchValue:f,handleSearchChange:G,resetFilters:Q}=be(u);let B;t[2]!==n||t[3]!==l||t[4]!==e||t[5]!==f||t[6]!==i?(B={query:f,page:e,category:n,version:i,loaders:l,limit:16},t[2]=n,t[3]=l,t[4]=e,t[5]=f,t[6]=i,t[7]=B):B=t[7];const{data:_,isLoading:U,isFetching:b,hasNextPage:d}=me(B),$=U||b;let x;t[8]!==d||t[9]!==b||t[10]!==e?(x=()=>{d&&!b&&(console.log("Loading more addons. Current page:",e),r(Ge))},t[8]=d,t[9]=b,t[10]=e,t[11]=x):x=t[11];let w;t[12]!==d||t[13]!==$||t[14]!==x?(w={loading:$,hasMore:d,onLoadMore:x},t[12]=d,t[13]=$,t[14]=x,t[15]=w):w=t[15];const{sentinelRef:O,loadingMore:M}=ue(w);let y;t[16]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{m([]),r(1)},t[16]=y):y=t[16];let j;t[17]!==n||t[18]!==l||t[19]!==f||t[20]!==i?(j=[f,n,l,i],t[17]=n,t[18]=l,t[19]=f,t[20]=i,t[21]=j):j=t[21],F.useEffect(y,j);let v,S;t[22]!==_||t[23]!==e?(v=()=>{_&&_.length>0&&(console.log(`New hits fetched: ${_.length} items`),m(e===1?_:le=>[...le,..._]))},S=[_,e],t[22]=_,t[23]=e,t[24]=v,t[25]=S):(v=t[24],S=t[25]),F.useEffect(v,S);let N;t[26]!==Q?(N=()=>{Q(),o(""),c(""),g(""),r(1),m([])},t[26]=Q,t[27]=N):N=t[27];const E=N,I=n!==""||l!==""||i!==""||f!=="",H=Qe;let C;t[28]===Symbol.for("react.memo_cache_sentinel")?(C=[{value:"all",label:"All"},{value:"tech",label:"Tech"},{value:"energy",label:"Energy"},{value:"magic",label:"Magic"}],t[28]=C):C=t[28];const T=C;let A;t[29]===Symbol.for("react.memo_cache_sentinel")?(A=[{value:"all",label:"All"},{value:"Forge",label:"Forge"},{value:"Fabric",label:"Fabric"},{value:"NeoForge",label:"NeoForge"},{value:"Quilt",label:"Quilt"}],t[29]=A):A=t[29];const P=A;let L;t[30]===Symbol.for("react.memo_cache_sentinel")?(L=[{value:"all",label:"All"},{value:"1.18.2",label:"1.18.2"},{value:"1.19.2",label:"1.19.2"},{value:"1.21.1",label:"1.21.1"}],t[30]=L):L=t[30];const k=L;let D;t[31]!==n?(D=s.jsx(X,{label:"Category",value:n,onChange:o,options:T}),t[31]=n,t[32]=D):D=t[32];let a;t[33]!==l?(a=s.jsx(X,{label:"Loaders",value:l,onChange:c,options:P}),t[33]=l,t[34]=a):a=t[34];let R;t[35]!==i?(R=s.jsx(X,{label:"Version",value:i,onChange:g,options:k}),t[35]=i,t[36]=R):R=t[36];let q;t[37]!==D||t[38]!==a||t[39]!==R?(q=s.jsxs(s.Fragment,{children:[D,a,R]}),t[37]=D,t[38]=a,t[39]=R,t[40]=q):q=t[40];const K=q,W=U&&e===1;let V;t[41]!==h||t[42]!==M||t[43]!==O||t[44]!==W?(V=s.jsx(pe,{items:h,renderItem:H,isLoading:W,isError:!1,emptyMessage:"No addons found.",infiniteScrollEnabled:!0,loadingMore:M,sentinelRef:O,animationEnabled:!0,animationDelay:.1,animationDuration:.4,staggerItemCount:16,skeletonCount:16}),t[41]=h,t[42]=M,t[43]=O,t[44]=W,t[45]=V):V=t[45];let z;return t[46]!==K||t[47]!==G||t[48]!==I||t[49]!==E||t[50]!==f||t[51]!==V?(z=s.jsx(ge,{searchValue:f,onSearchChange:G,searchPlaceholder:"Search addons...",filters:K,onResetFilters:E,filterTitle:"Addon Filters",hasActiveFilters:I,children:V}),t[46]=K,t[47]=G,t[48]=I,t[49]=E,t[50]=f,t[51]=V,t[52]=z):z=t[52],z};function Ge(t){return t+1}function Qe(t){return s.jsx($e,{addon:t},t.$id)}function at(){const t=J.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=s.jsx(Je,{}),t[0]=e):e=t[0],e}export{at as default};
