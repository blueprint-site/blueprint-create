import{j as l,r as L}from"./radix-x8H_F-uE.js";import{c as D,C as T,a as G,M as H,b as w,B as U,d as V,L as q,e as z,f as J,u as K}from"./index-CV_NrdTx.js";import{u as O,I as Q,L as W}from"./ListPageLayout-BgScUpIv.js";import{u as X}from"./useListPageFilters-WcodJ-Da.js";import"./tanstack-aN5NUOUd.js";import"./animation-RShxBXpy.js";import"./funnel-BZzBqqm1.js";const Y=e=>{const t=D.c(28),{blog:s}=e;let r;t[0]!==s.img_url||t[1]!==s.title?(r=l.jsx("img",{src:s.img_url,alt:s.title,className:"aspect-16/9 object-contain"}),t[0]=s.img_url,t[1]=s.title,t[2]=r):r=t[2];let c;t[3]!==s.title?(c=l.jsx(T,{className:"text-2xl font-bold",children:s.title}),t[3]=s.title,t[4]=c):c=t[4];let m;t[5]!==s.tags?(m=s.tags||[],t[5]=s.tags,t[6]=m):m=t[6];let i;t[7]!==m?(i=l.jsx(w,{children:l.jsx(U,{value:m})}),t[7]=m,t[8]=i):i=t[8];let a;t[9]!==r||t[10]!==c||t[11]!==i?(a=l.jsxs(V,{children:[r,c,i]}),t[9]=r,t[10]=c,t[11]=i,t[12]=a):a=t[12];let f;t[13]!==s.content?(f=l.jsx(G,{className:"flex-grow overflow-hidden",children:l.jsx(H,{content:s.content,className:"line-clamp-[7] text-ellipsis"})}),t[13]=s.content,t[14]=f):f=t[14];let d;t[15]!==s.authors?(d=s.authors.map(Z),t[15]=s.authors,t[16]=d):d=t[16];let o;t[17]!==d?(o=l.jsx(w,{className:"text-foreground-muted",children:d}),t[17]=d,t[18]=o):o=t[18];const h=`/blog/${s.$id}/${s.slug}`;let n;t[19]!==h?(n=l.jsx(q,{to:h,className:"text-blue-500 hover:text-blue-700",children:"Read more..."}),t[19]=h,t[20]=n):n=t[20];let g;t[21]!==n||t[22]!==o?(g=l.jsxs(z,{className:"mt-auto flex justify-end",children:[o,n]}),t[21]=n,t[22]=o,t[23]=g):g=t[23];let u;return t[24]!==g||t[25]!==a||t[26]!==f?(u=l.jsxs(J,{className:"bg-surface-1 flex h-[450px] flex-col",children:[a,f,g]}),t[24]=g,t[25]=a,t[26]=f,t[27]=u):u=t[27],u};function Z(e,t){return l.jsx("div",{children:e},t)}const fe=()=>{const e=D.c(30),[t,s]=L.useState(1);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[c,m]=L.useState(r);let i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i={onFilterChange:()=>{s(1)}},e[1]=i):i=e[1];const{searchValue:a,handleSearchChange:f,resetFilters:d}=X(i),{data:o,isLoading:h,isFetching:n}=K(a,"all",t);o?.data;let g,u;e[2]!==o?.data?(u=o?.data||[],e[2]=o?.data,e[3]=u):u=e[3],g=u;const b=g,x=o?.hasNextPage||!1,R=ee;let j;e[4]!==x||e[5]!==n?(j=()=>{x&&!n&&s(te)},e[4]=x,e[5]=n,e[6]=j):j=e[6];const v=j,E=h||n;let _;e[7]!==v||e[8]!==x||e[9]!==E?(_={loading:E,hasMore:x,onLoadMore:v},e[7]=v,e[8]=x,e[9]=E,e[10]=_):_=e[10];const{sentinelRef:M,loadingMore:$}=O(_);let C;e[11]===Symbol.for("react.memo_cache_sentinel")?(C=()=>{m([]),s(1)},e[11]=C):C=e[11];let N;e[12]!==a?(N=[a],e[12]=a,e[13]=N):N=e[13],L.useEffect(C,N);let S,y;e[14]!==b||e[15]!==t?(y=()=>{if(b?.length){const I=R(b);m(A=>t===1?I:[...A,...I])}},S=[b,t,R],e[14]=b,e[15]=t,e[16]=S,e[17]=y):(S=e[16],y=e[17]),L.useEffect(y,S);const P=a!=="";let B;e[18]===Symbol.for("react.memo_cache_sentinel")?(B=l.jsx("div",{className:"text-muted-foreground text-sm",children:"Use the search bar above to find blog posts by title or content."}),e[18]=B):B=e[18];const k=B;let p;e[19]!==c||e[20]!==h||e[21]!==$||e[22]!==M?(p=l.jsx(Q,{items:c,renderItem:se,isLoading:h,isError:!1,emptyMessage:"No blog posts found.",infiniteScrollEnabled:!0,loadingMore:$,sentinelRef:M}),e[19]=c,e[20]=h,e[21]=$,e[22]=M,e[23]=p):p=e[23];let F;return e[24]!==f||e[25]!==P||e[26]!==d||e[27]!==a||e[28]!==p?(F=l.jsx(W,{searchValue:a,onSearchChange:f,searchPlaceholder:"Search blog posts...",filters:k,onResetFilters:d,filterTitle:"Blog Filters",hasActiveFilters:P,children:p}),e[24]=f,e[25]=P,e[26]=d,e[27]=a,e[28]=p,e[29]=F):F=e[29],F};function ee(e){return e?.length?e:[]}function te(e){return e+1}function se(e){return l.jsx(Y,{blog:e},e.$id)}export{fe as default};
