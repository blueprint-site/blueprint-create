import{r as N,j as r}from"./radix-C-pgD6KV.js";import{aI as Fe,c as W,aS as _e,p as je,W as De,aT as ye,aU as we,aV as Ne,aW as Ae,aX as Se,_ as Oe,h as Le,d as Te,a7 as ke,a as Ee,f as Me,D as Pe,r as Ce,Z as Ve,v as Re,s as Ue,t as Ie,x as Qe,y as qe,aY as Be,aZ as ue,a_ as de,a$ as fe,b0 as me,b1 as he,b2 as pe,aw as ze,b3 as Ze,b4 as xe,b5 as Ge,g as Je,I as We}from"./index-B9yludtD.js";import{L as He}from"./ListPageLayout-BC5-06Ai.js";import{M as Ke}from"./ModPageLinks-B8eh08r7.js";import{d as be}from"./tanstack-DgeIbdmq.js";import"./animation-BayOgkCF.js";const Xe=Fe.map(t=>t.value.toLowerCase()),Ye=t=>t.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),et=t=>{const e=W.c(5),{categories:s}=t;let l,a;if(e[0]!==s){a=Symbol.for("react.early_return_sentinel");e:{const h=_e(s);if(h.length===0){a=null;break e}l=[...new Set(h.filter(st).map(rt))].map(Ye)}e[0]=s,e[1]=l,e[2]=a}else l=e[1],a=e[2];if(a!==Symbol.for("react.early_return_sentinel"))return a;const c=l;if(c.length===0)return null;let u;return e[3]!==c?(u=r.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:c.map(at)}),e[3]=c,e[4]=u):u=e[4],u},tt=N.memo(et);function st(t){return!Xe.includes(t)}function rt(t){return t.toLowerCase()}function at(t){return r.jsx(je,{children:t},t)}const lt=t=>{const e=W.c(7),{versions:s}=t;let l,a,c;if(e[0]!==s){c=Symbol.for("react.early_return_sentinel");e:{const h=_e(s);if(h.length===0){c=null;break e}l="mt-3 flex flex-wrap gap-1.5",a=h.map(it)}e[0]=s,e[1]=l,e[2]=a,e[3]=c}else l=e[1],a=e[2],c=e[3];if(c!==Symbol.for("react.early_return_sentinel"))return c;let u;return e[4]!==l||e[5]!==a?(u=r.jsx("div",{className:l,children:a}),e[4]=l,e[5]=a,e[6]=u):u=e[6],u};function it(t){return r.jsx(je,{variant:"secondary",className:"px-1.5 py-0.5 font-mono text-xs",children:t},t)}const ot=t=>{const e=W.c(18),{authors:s,downloads:l,claimed_by:a}=t;let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx(De,{className:"h-3.5"}),e[0]=c):c=e[0];let u;e[1]!==s?(u=s&&s.length>0?s.join(", "):"Unknown",e[1]=s,e[2]=u):u=e[2];let h;e[3]!==u?(h=r.jsx("span",{className:"truncate",children:u}),e[3]=u,e[4]=h):h=e[4];let n;e[5]!==a?(n=a&&r.jsx(ye,{children:r.jsxs(we,{children:[r.jsx(Ne,{children:r.jsx("span",{className:"text-primary inline text-xs",children:r.jsx(Ae,{className:"text-primary h-3.5"})})}),r.jsx(Se,{children:"The addon has been verified and it is owned by that user"})]})}),e[5]=a,e[6]=n):n=e[6];let y;e[7]!==h||e[8]!==n?(y=r.jsxs("div",{className:"flex items-center gap-0.5 border-b pb-1",children:[c,h,n]}),e[7]=h,e[8]=n,e[9]=y):y=e[9];let g;e[10]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(Oe,{className:"h-3.5"}),e[10]=g):g=e[10];let w;e[11]!==l?(w=l.toLocaleString(),e[11]=l,e[12]=w):w=e[12];let x;e[13]!==w?(x=r.jsxs("div",{className:"flex items-center gap-0.5 border-b pb-1",children:[g,r.jsx("span",{className:"mr-1",children:w})]}),e[13]=w,e[14]=x):x=e[14];let S;return e[15]!==y||e[16]!==x?(S=r.jsxs("div",{className:"text-foreground-muted mt-3 flex items-center justify-between text-xs",children:[y,x]}),e[15]=y,e[16]=x,e[17]=S):S=e[17],S},nt=t=>{const e=W.c(65),{addon:s}=t,l=Le();let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[0]=a):a=e[0];const[c,u]=N.useState(a);let h,n;e[1]!==s.curseforge_raw||e[2]!==s.modrinth_raw?(h=()=>{const j=[];s.curseforge_raw&&j.push("curseforge"),s.modrinth_raw&&j.push("modrinth"),u(j)},n=[s.curseforge_raw,s.modrinth_raw],e[1]=s.curseforge_raw,e[2]=s.modrinth_raw,e[3]=h,e[4]=n):(h=e[3],n=e[4]),N.useEffect(h,n);const y=dt;let g;e[5]!==s.slug||e[6]!==l?(g=()=>{l(`/addons/${s.slug}`)},e[5]=s.slug,e[6]=l,e[7]=g):g=e[7];const w=g;let x;e[8]===Symbol.for("react.memo_cache_sentinel")?(x=j=>{const Z={basicInfo:{name:j.name||"MISSING",displayName:y(j),slug:j.slug,authors:j.authors},rawDataInfo:{curseforge_raw_type:typeof j.curseforge_raw,curseforge_raw_length:typeof j.curseforge_raw=="string"?j.curseforge_raw.length:j.curseforge_raw?"object":"null",curseforge_raw_preview:typeof j.curseforge_raw=="string"?j.curseforge_raw.substring(0,100)+"...":j.curseforge_raw?"Object present":"null",modrinth_raw_type:typeof j.modrinth_raw,modrinth_raw_length:typeof j.modrinth_raw=="string"?j.modrinth_raw.length:j.modrinth_raw?"object":"null",modrinth_raw_preview:typeof j.modrinth_raw=="string"?j.modrinth_raw.substring(0,100)+"...":j.modrinth_raw?"Object present":"null"},fullData:j};return JSON.stringify(Z,null,2)},e[8]=x):x=e[8];const S=x,B=ht,z=xt,d=_t,o=typeof window<"u"&&window.localStorage.getItem("debug")==="true",f=s.icon||"/assets/wrench.webp";let m;e[9]!==s?(m=y(s),e[9]=s,e[10]=m):m=e[10];let _;e[11]!==f||e[12]!==m?(_=r.jsx("img",{src:f,alt:m,loading:"lazy",className:"h-12 w-12 object-cover"}),e[11]=f,e[12]=m,e[13]=_):_=e[13];let b;e[14]!==s?(b=y(s),e[14]=s,e[15]=b):b=e[15];let C;e[16]!==b?(C=r.jsx("h3",{className:"truncate text-sm font-medium",children:b}),e[16]=b,e[17]=C):C=e[17];let i;e[18]!==w||e[19]!==C||e[20]!==_?(i=r.jsxs(Te,{className:"relative flex cursor-pointer flex-row gap-3",onClick:w,children:[_,C]}),e[18]=w,e[19]=C,e[20]=_,e[21]=i):i=e[21];let $;e[22]!==s.description?($=r.jsx("p",{className:"text-foreground-muted text-xs",children:s.description}),e[22]=s.description,e[23]=$):$=e[23];let V;e[24]!==s.loaders?(V=B(s.loaders),e[24]=s.loaders,e[25]=V):V=e[25];let L;e[26]!==V?(L=r.jsx("div",{className:"mt-2 flex gap-2",children:r.jsx(ke,{loaders:V})}),e[26]=V,e[27]=L):L=e[27];let T;e[28]!==s.categories?(T=z(s.categories),e[28]=s.categories,e[29]=T):T=e[29];let R;e[30]!==T?(R=r.jsx(tt,{categories:T}),e[30]=T,e[31]=R):R=e[31];let I;e[32]!==s.minecraft_versions?(I=d(s.minecraft_versions),e[32]=s.minecraft_versions,e[33]=I):I=e[33];let F;e[34]!==I?(F=r.jsx(lt,{versions:I}),e[34]=I,e[35]=F):F=e[35];let U;e[36]!==$||e[37]!==L||e[38]!==R||e[39]!==F?(U=r.jsxs("div",{className:"flex-1",children:[$,L,R,F]}),e[36]=$,e[37]=L,e[38]=R,e[39]=F,e[40]=U):U=e[40];let D;e[41]!==s.authors||e[42]!==s.claimed_by||e[43]!==s.downloads?(D=r.jsx(ot,{authors:s.authors,downloads:s.downloads,claimed_by:s.claimed_by}),e[41]=s.authors,e[42]=s.claimed_by,e[43]=s.downloads,e[44]=D):D=e[44];const H=s.slug;let q;e[45]!==c?(q=c.includes("curseforge"),e[45]=c,e[46]=q):q=e[46];let Q;e[47]!==c?(Q=c.includes("modrinth"),e[47]=c,e[48]=Q):Q=e[48];let A;e[49]!==s.slug||e[50]!==q||e[51]!==Q?(A=r.jsx(Ke,{slug:H,curseforge:q,modrinth:Q}),e[49]=s.slug,e[50]=q,e[51]=Q,e[52]=A):A=e[52];let k;e[53]!==U||e[54]!==D||e[55]!==A?(k=r.jsxs(Ee,{className:"flex flex-1 flex-col gap-3",children:[U,D,A]}),e[53]=U,e[54]=D,e[55]=A,e[56]=k):k=e[56];let E;e[57]!==i||e[58]!==k?(E=r.jsx(Ne,{asChild:!0,children:r.jsxs(Me,{className:"flex h-full flex-col overflow-hidden hover:shadow-xs",children:[i,k]})}),e[57]=i,e[58]=k,e[59]=E):E=e[59];let M;e[60]!==s?(M=o&&r.jsx(Se,{side:"right",className:"bg-surface-2 max-h-96 max-w-lg overflow-auto border p-4",children:r.jsxs("div",{className:"text-xs",children:[r.jsx("div",{className:"mb-2 font-semibold",children:"Raw Addon Data (Debug):"}),r.jsx("pre",{className:"font-mono text-xs whitespace-pre-wrap",children:S(s)})]})}),e[60]=s,e[61]=M):M=e[61];let O;return e[62]!==E||e[63]!==M?(O=r.jsx(ye,{delayDuration:500,children:r.jsxs(we,{open:o?void 0:!1,children:[E,M]})}),e[62]=E,e[63]=M,e[64]=O):O=e[64],O},ct=N.memo(nt);function ut(t){return t.charAt(0).toUpperCase()+t.slice(1)}function dt(t){if(t.name)return t.name;if(t.modrinth_raw_parsed&&typeof t.modrinth_raw_parsed=="object"&&"title"in t.modrinth_raw_parsed)return t.modrinth_raw_parsed.title;if(t.curseforge_raw_parsed&&typeof t.curseforge_raw_parsed=="object"&&"name"in t.curseforge_raw_parsed)return t.curseforge_raw_parsed.name;if(typeof t.modrinth_raw=="string")try{const e=JSON.parse(t.modrinth_raw);if(e.title)return e.title}catch{}if(typeof t.curseforge_raw=="string")try{const e=JSON.parse(t.curseforge_raw);if(e.name)return e.name}catch{}return t.slug?t.slug.split("-").map(ut).join(" "):"Unknown Addon"}function ft(t){return t.trim()}function mt(t){return t.length>0}function ht(t){return t?Array.isArray(t)?t:typeof t=="string"?t.split(",").map(ft).filter(mt):[]:[]}function pt(t){return t.trim()}function gt(t){return t.length>0}function xt(t){return t?Array.isArray(t)?t:typeof t=="string"?t.split(",").map(pt).filter(gt):[]:[]}function bt(t){return t.trim()}function vt(t){return t.length>0}function _t(t){return t?Array.isArray(t)?t:typeof t=="string"?t.split(",").map(bt).filter(vt):[]:[]}const ge={categories:[],loaders:[],minecraft_versions:[],authors:[],sort:"relevance"},ve=[{value:"relevance",label:"Relevance"},{value:"downloads:desc",label:"Most Downloaded"},{value:"downloads:asc",label:"Least Downloaded"},{value:"updated_at:desc",label:"Recently Updated"},{value:"created_at:desc",label:"Recently Added"},{value:"name:asc",label:"Name (A-Z)"},{value:"name:desc",label:"Name (Z-A)"}],jt=[{id:"popular-tech",name:"Popular Tech Mods",description:"Most downloaded technology mods",filters:{categories:["tech","industrial","automation"],sort:"downloads:desc"},icon:"âš™ï¸"},{id:"latest-magic",name:"Latest Magic Mods",description:"Recently updated magic mods",filters:{categories:["magic","enchantment","alchemy"],sort:"updated_at:desc"},icon:"âœ¨"},{id:"adventure-content",name:"Adventure Content",description:"Exploration and dungeon mods",filters:{categories:["adventure","exploration","dungeons","structures"],sort:"downloads:desc"},icon:"ðŸ—ºï¸"},{id:"performance",name:"Performance Mods",description:"Optimization and performance improvements",filters:{categories:["utility","performance","optimization"],sort:"downloads:desc"},icon:"âš¡"}],yt={Latest:["1.21.1","1.21","1.20.6","1.20.4","1.20.1"],LTS:["1.19.2","1.18.2","1.16.5","1.12.2"],Legacy:["1.7.10","1.6.4","1.5.2","1.4.7"]},wt=t=>{const e=W.c(11),{onApplyPreset:s}=t,[l,a]=N.useState(!1);let c;e[0]!==s?(c=x=>{s(x),a(!1)},e[0]=s,e[1]=c):c=e[1];const u=c;let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(Pe,{asChild:!0,children:r.jsxs(Ce,{variant:"outline",size:"sm",className:"gap-2",children:[r.jsx(Ve,{className:"h-4 w-4"}),"Quick Filters"]})}),e[2]=h):h=e[2];let n;e[3]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsxs(Re,{children:[r.jsx(Ue,{children:"Quick Filter Presets"}),r.jsx(Ie,{children:"Select a preset to quickly filter addons by popular categories"})]}),e[3]=n):n=e[3];let y;e[4]!==u?(y=jt.map(x=>r.jsxs("button",{onClick:()=>u(x),className:"hover:bg-accent flex items-start gap-3 rounded-lg border p-4 text-left transition-colors",children:[r.jsx("span",{className:"text-2xl",children:x.icon}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:x.name}),x.description&&r.jsx("div",{className:"text-muted-foreground text-sm",children:x.description})]})]},x.id)),e[4]=u,e[5]=y):y=e[5];let g;e[6]!==y?(g=r.jsxs(Qe,{className:"sm:max-w-[425px]",children:[n,r.jsx("div",{className:"grid gap-3 py-4",children:y})]}),e[6]=y,e[7]=g):g=e[7];let w;return e[8]!==l||e[9]!==g?(w=r.jsxs(qe,{open:l,onOpenChange:a,children:[h,g]}),e[8]=l,e[9]=g,e[10]=w):w=e[10],w},Nt=t=>{const e=W.c(101),{filters:s,facets:l,onFilterChange:a,onClearFilters:c,onApplyPreset:u}=t;let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h={categories:!1,loaders:!1,versions:!1,authors:!1},e[0]=h):h=e[0];const[n,y]=N.useState(h);let g;e[1]===Symbol.for("react.memo_cache_sentinel")?(g=p=>{y(v=>({...v,[p]:!v[p]}))},e[1]=g):g=e[1];const w=g;let x;e[2]!==s.authors||e[3]!==s.categories||e[4]!==s.loaders||e[5]!==s.minecraft_versions||e[6]!==s.sort?(x=()=>{const p=[];if(s.categories.forEach(v=>{p.push({type:"category",value:v,label:`Category: ${v}`})}),s.loaders.forEach(v=>{p.push({type:"loader",value:v,label:`Loader: ${v}`})}),s.minecraft_versions.forEach(v=>{p.push({type:"version",value:v,label:`Version: ${v}`})}),s.authors.forEach(v=>{p.push({type:"author",value:v,label:`Author: ${v}`})}),s.sort&&s.sort!=="relevance"){const v=ve.find(P=>P.value===s.sort)?.label||s.sort;p.push({type:"sort",value:s.sort,label:`Sort: ${v}`})}return p},e[2]=s.authors,e[3]=s.categories,e[4]=s.loaders,e[5]=s.minecraft_versions,e[6]=s.sort,e[7]=x):x=e[7];const S=x;let B;e[8]!==s.authors||e[9]!==s.categories||e[10]!==s.loaders||e[11]!==s.minecraft_versions||e[12]!==a?(B=(p,v)=>{e:switch(p){case"category":{a("categories",s.categories.filter(P=>P!==v));break e}case"loader":{a("loaders",s.loaders.filter(P=>P!==v));break e}case"version":{a("minecraft_versions",s.minecraft_versions.filter(P=>P!==v));break e}case"author":{a("authors",s.authors.filter(P=>P!==v));break e}case"sort":a("sort","relevance")}},e[8]=s.authors,e[9]=s.categories,e[10]=s.loaders,e[11]=s.minecraft_versions,e[12]=a,e[13]=B):B=e[13];const z=B;let d;e[14]!==S?(d=S(),e[14]=S,e[15]=d):d=e[15];const o=d;let f;e[16]!==l?(f=()=>l?.categories&&Object.keys(l.categories).length>0?Object.entries(l.categories).filter(St).map($t).sort(Ft):[{value:"tech",label:"Tech"},{value:"industrial",label:"Industrial"},{value:"automation",label:"Automation"},{value:"energy",label:"Energy"},{value:"magic",label:"Magic"},{value:"adventure",label:"Adventure"},{value:"decoration",label:"Decoration"},{value:"utility",label:"Utility"},{value:"worldgen",label:"World Gen"}],e[16]=l,e[17]=f):f=e[17];const m=f;let _;e[18]!==l?(_=()=>l?.loaders&&Object.keys(l.loaders).length>0?Object.entries(l.loaders).filter(Dt).map(At).sort(Ot):[{value:"Forge",label:"Forge"},{value:"Fabric",label:"Fabric"},{value:"NeoForge",label:"NeoForge"},{value:"Quilt",label:"Quilt"}],e[18]=l,e[19]=_):_=e[19];const b=_;let C;e[20]!==l?(C=()=>l?.minecraft_versions&&Object.keys(l.minecraft_versions).length>0?Object.entries(l.minecraft_versions).filter(Lt).map(Tt).sort(kt):[{value:"1.21.1",label:"1.21.1"},{value:"1.21",label:"1.21"},{value:"1.20.6",label:"1.20.6"},{value:"1.20.4",label:"1.20.4"},{value:"1.20.1",label:"1.20.1"},{value:"1.19.2",label:"1.19.2"},{value:"1.18.2",label:"1.18.2"},{value:"1.16.5",label:"1.16.5"},{value:"1.12.2",label:"1.12.2"}],e[20]=l,e[21]=C):C=e[21];const i=C;let $;e[22]!==l?($=()=>l?.authors&&Object.keys(l.authors).length>0?Object.entries(l.authors).slice(0,50).map(Et):[],e[22]=l,e[23]=$):$=e[23];const V=$;let L;e[24]!==u?(L=u&&r.jsx("div",{className:"flex justify-center",children:r.jsx(wt,{onApplyPreset:u})}),e[24]=u,e[25]=L):L=e[25];let T;e[26]!==o||e[27]!==c||e[28]!==z?(T=o.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h3",{className:"text-sm font-medium",children:["Active Filters (",o.length,")"]}),r.jsx(Ce,{variant:"ghost",size:"sm",onClick:c,className:"h-6 px-2 text-xs",children:"Clear All"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:o.map((p,v)=>r.jsx(Be,{label:p.label,onRemove:()=>z(p.type,p.value)},`${p.type}-${p.value}-${v}`))})]}),e[26]=o,e[27]=c,e[28]=z,e[29]=T):T=e[29];let R;e[30]===Symbol.for("react.memo_cache_sentinel")?(R=r.jsx("label",{className:"text-sm font-medium",children:"Sort By"}),e[30]=R):R=e[30];const I=s.sort||"relevance";let F;e[31]!==a?(F=p=>a("sort",p.target.value),e[31]=a,e[32]=F):F=e[32];let U;e[33]===Symbol.for("react.memo_cache_sentinel")?(U=ve.map(Mt),e[33]=U):U=e[33];let D;e[34]!==I||e[35]!==F?(D=r.jsxs("div",{className:"space-y-2",children:[R,r.jsx(ze,{className:"h-10 w-full rounded-md border",children:r.jsx("select",{value:I,onChange:F,className:"bg-background w-full border-0 px-3 py-2 text-sm focus:outline-none",children:U})})]}),e[34]=I,e[35]=F,e[36]=D):D=e[36];const H=n.categories;let q;e[37]===Symbol.for("react.memo_cache_sentinel")?(q=()=>w("categories"),e[37]=q):q=e[37];let Q;e[38]===Symbol.for("react.memo_cache_sentinel")?(Q=r.jsx("span",{className:"text-sm font-medium",children:"Categories"}),e[38]=Q):Q=e[38];let A;e[39]!==n.categories?(A=r.jsxs(ue,{onClick:q,className:"hover:bg-accent flex w-full items-center justify-between rounded-md px-2 py-1",children:[Q,n.categories?r.jsx(de,{className:"h-4 w-4"}):r.jsx(fe,{className:"h-4 w-4"})]}),e[39]=n.categories,e[40]=A):A=e[40];let k;e[41]!==m?(k=m(),e[41]=m,e[42]=k):k=e[42];let E;e[43]!==s.categories||e[44]!==a?(E=p=>{const v=s.categories.includes(p)?s.categories.filter(P=>P!==p):[...s.categories,p];a("categories",v)},e[43]=s.categories,e[44]=a,e[45]=E):E=e[45];let M;e[46]!==s.categories||e[47]!==k||e[48]!==E?(M=r.jsx(me,{className:"pt-2",children:r.jsx(he,{options:k,selectedValues:s.categories,onToggle:E,searchable:!0,placeholder:"Search categories..."})}),e[46]=s.categories,e[47]=k,e[48]=E,e[49]=M):M=e[49];let O;e[50]!==n.categories||e[51]!==A||e[52]!==M?(O=r.jsxs(pe,{open:H,children:[A,M]}),e[50]=n.categories,e[51]=A,e[52]=M,e[53]=O):O=e[53];const j=n.loaders;let Z;e[54]===Symbol.for("react.memo_cache_sentinel")?(Z=()=>w("loaders"),e[54]=Z):Z=e[54];let K;e[55]===Symbol.for("react.memo_cache_sentinel")?(K=r.jsx("span",{className:"text-sm font-medium",children:"Mod Loaders"}),e[55]=K):K=e[55];let G;e[56]!==n.loaders?(G=r.jsxs(ue,{onClick:Z,className:"hover:bg-accent flex w-full items-center justify-between rounded-md px-2 py-1",children:[K,n.loaders?r.jsx(de,{className:"h-4 w-4"}):r.jsx(fe,{className:"h-4 w-4"})]}),e[56]=n.loaders,e[57]=G):G=e[57];let J;e[58]!==b?(J=b(),e[58]=b,e[59]=J):J=e[59];let X;e[60]!==s.loaders||e[61]!==a?(X=p=>{const v=s.loaders.includes(p)?s.loaders.filter(P=>P!==p):[...s.loaders,p];a("loaders",v)},e[60]=s.loaders,e[61]=a,e[62]=X):X=e[62];let Y;e[63]!==s.loaders||e[64]!==J||e[65]!==X?(Y=r.jsx(me,{className:"pt-2",children:r.jsx(he,{options:J,selectedValues:s.loaders,onToggle:X})}),e[63]=s.loaders,e[64]=J,e[65]=X,e[66]=Y):Y=e[66];let ee;e[67]!==n.loaders||e[68]!==G||e[69]!==Y?(ee=r.jsxs(pe,{open:j,children:[G,Y]}),e[67]=n.loaders,e[68]=G,e[69]=Y,e[70]=ee):ee=e[70];const $e=n.versions;let oe;e[71]===Symbol.for("react.memo_cache_sentinel")?(oe=()=>w("versions"),e[71]=oe):oe=e[71];let ne;e[72]===Symbol.for("react.memo_cache_sentinel")?(ne=r.jsx("span",{className:"text-sm font-medium",children:"Minecraft Versions"}),e[72]=ne):ne=e[72];let te;e[73]!==n.versions?(te=r.jsxs(ue,{onClick:oe,className:"hover:bg-accent flex w-full items-center justify-between rounded-md px-2 py-1",children:[ne,n.versions?r.jsx(de,{className:"h-4 w-4"}):r.jsx(fe,{className:"h-4 w-4"})]}),e[73]=n.versions,e[74]=te):te=e[74];let se;e[75]!==i?(se=i(),e[75]=i,e[76]=se):se=e[76];let re;e[77]!==s.minecraft_versions||e[78]!==a?(re=p=>{const v=s.minecraft_versions.includes(p)?s.minecraft_versions.filter(P=>P!==p):[...s.minecraft_versions,p];a("minecraft_versions",v)},e[77]=s.minecraft_versions,e[78]=a,e[79]=re):re=e[79];let ae;e[80]!==s.minecraft_versions||e[81]!==se||e[82]!==re?(ae=r.jsx(me,{className:"pt-2",children:r.jsx(he,{options:se,selectedValues:s.minecraft_versions,onToggle:re,searchable:!0,placeholder:"Search versions...",grouped:!0,groups:yt})}),e[80]=s.minecraft_versions,e[81]=se,e[82]=re,e[83]=ae):ae=e[83];let le;e[84]!==n.versions||e[85]!==te||e[86]!==ae?(le=r.jsxs(pe,{open:$e,children:[te,ae]}),e[84]=n.versions,e[85]=te,e[86]=ae,e[87]=le):le=e[87];let ie;e[88]!==n.authors||e[89]!==s.authors||e[90]!==V||e[91]!==a?(ie=V().length>0&&r.jsxs(pe,{open:n.authors,children:[r.jsxs(ue,{onClick:()=>w("authors"),className:"hover:bg-accent flex w-full items-center justify-between rounded-md px-2 py-1",children:[r.jsx("span",{className:"text-sm font-medium",children:"Authors"}),n.authors?r.jsx(de,{className:"h-4 w-4"}):r.jsx(fe,{className:"h-4 w-4"})]}),r.jsx(me,{className:"pt-2",children:r.jsx(he,{options:V(),selectedValues:s.authors,onToggle:p=>{const v=s.authors.includes(p)?s.authors.filter(P=>P!==p):[...s.authors,p];a("authors",v)},searchable:!0,placeholder:"Search authors..."})})]}),e[88]=n.authors,e[89]=s.authors,e[90]=V,e[91]=a,e[92]=ie):ie=e[92];let ce;return e[93]!==L||e[94]!==T||e[95]!==D||e[96]!==O||e[97]!==ee||e[98]!==le||e[99]!==ie?(ce=r.jsxs("div",{className:"space-y-4",children:[L,T,D,O,ee,le,ie]}),e[93]=L,e[94]=T,e[95]=D,e[96]=O,e[97]=ee,e[98]=le,e[99]=ie,e[100]=ce):ce=e[100],ce};function St(t){const[e,s]=t;return e&&e.length>1&&!e.includes(",")&&!e.includes("null")&&!e.includes("undefined")&&s>0}function Ct(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}function $t(t){const[e,s]=t,l=e.split(/[-_]/).map(Ct).join(" ");return{value:e,label:l,count:s}}function Ft(t,e){return e.count-t.count}function Dt(t){const[e,s]=t;return e&&e.length>1&&!e.includes(",")&&!e.includes("null")&&!e.includes("undefined")&&s>0}function At(t){const[e,s]=t;return{value:e,label:e,count:s}}function Ot(t,e){return e.count-t.count}function Lt(t){const[e,s]=t;return e&&e.match(/^\d+\.\d+(\.\d+)?$/)&&!e.includes(",")&&s>0}function Tt(t){const[e,s]=t;return{value:e,label:e,count:s}}function kt(t,e){const s=t.value.split(".").map(Number),l=e.value.split(".").map(Number);for(let a=0;a<Math.max(s.length,l.length);a++){const c=s[a]||0,u=l[a]||0;if(c!==u)return u-c}return 0}function Et(t){const[e,s]=t;return{value:e,label:e,count:s}}function Mt(t){return r.jsx("option",{value:t.value,children:t.label},t.value)}const Pt=()=>{const[t,e]=Ze(),[s,l]=N.useState(()=>Vt(t)),[a,c]=N.useState(""),{data:u}=be({queryKey:["all-addon-facets"],queryFn:async()=>{try{const o=await xe.index("addons").search("*",{facets:["categories","loaders","minecraft_versions","authors"],filter:"isValid = true",limit:0,attributesToRetrieve:[]}),f={};if(o.facetDistribution?.categories){const m={};Object.entries(o.facetDistribution.categories).forEach(([_,b])=>{_.split(",").map(i=>i.trim()).filter(i=>i).forEach(i=>{m[i]=(m[i]||0)+b})}),f.categories=m}if(o.facetDistribution?.loaders){const m={};Object.entries(o.facetDistribution.loaders).forEach(([_,b])=>{_.split(",").map(i=>i.trim()).filter(i=>i).forEach(i=>{m[i]=(m[i]||0)+b})}),f.loaders=m}if(o.facetDistribution?.minecraft_versions){const m={};Object.entries(o.facetDistribution.minecraft_versions).forEach(([_,b])=>{_.split(",").map(i=>i.trim()).filter(i=>i).forEach(i=>{m[i]=(m[i]||0)+b})}),f.minecraft_versions=m}return o.facetDistribution?.authors&&(f.authors=o.facetDistribution.authors),f}catch(d){return console.warn("Failed to fetch all facets:",d),{}}},staleTime:10*60*1e3,retry:!1}),{data:h,isLoading:n}=be({queryKey:["addon-facets",s,a],queryFn:async()=>{try{const o=await xe.index("addons").search("*",{facets:["categories","loaders","minecraft_versions","authors"],filter:"isValid = true",limit:0,attributesToRetrieve:[]}),f={};if(o.facetDistribution?.categories){const m={};Object.entries(o.facetDistribution.categories).forEach(([_,b])=>{_.split(",").map(i=>i.trim()).filter(i=>i).forEach(i=>{m[i]=(m[i]||0)+b})}),f.categories=m}if(o.facetDistribution?.loaders){const m={};Object.entries(o.facetDistribution.loaders).forEach(([_,b])=>{_.split(",").map(i=>i.trim()).filter(i=>i).forEach(i=>{m[i]=(m[i]||0)+b})}),f.loaders=m}if(o.facetDistribution?.minecraft_versions){const m={};Object.entries(o.facetDistribution.minecraft_versions).forEach(([_,b])=>{_.split(",").map(i=>i.trim()).filter(i=>i).forEach(i=>{m[i]=(m[i]||0)+b})}),f.minecraft_versions=m}return o.facetDistribution?.authors&&(f.authors=o.facetDistribution.authors),f}catch(d){return console.warn("Failed to fetch facets, using fallback options:",d),{}}},staleTime:5*60*1e3,retry:!1}),y=N.useMemo(()=>{const d=[];if(d.push("isValid = true"),s.categories.length>0){const o=s.categories.map(f=>`categories = "${f}"`).join(" OR ");d.push(`(${o})`)}if(s.loaders.length>0){const o=s.loaders.map(f=>`loaders = "${f}"`).join(" OR ");d.push(`(${o})`)}if(s.minecraft_versions.length>0){const o=s.minecraft_versions.map(f=>`minecraft_versions = "${f}"`).join(" OR ");d.push(`(${o})`)}if(s.authors.length>0){const o=s.authors.map(f=>`authors = "${f}"`).join(" OR ");d.push(`(${o})`)}if(s.downloads&&(s.downloads.min!==void 0&&d.push(`downloads >= ${s.downloads.min}`),s.downloads.max!==void 0&&d.push(`downloads <= ${s.downloads.max}`)),s.lastUpdated){if(s.lastUpdated.from){const o=Math.floor(s.lastUpdated.from.getTime()/1e3);d.push(`updated_at >= ${o}`)}if(s.lastUpdated.to){const o=Math.floor(s.lastUpdated.to.getTime()/1e3);d.push(`updated_at <= ${o}`)}}return d.join(" AND ")},[s]),g=N.useCallback((d,o)=>{l(f=>({...f,[d]:o}))},[]),w=N.useCallback((d,o)=>{l(f=>{const m=f[d],_=m.includes(o)?m.filter(b=>b!==o):[...m,o];return{...f,[d]:_}})},[]),x=N.useCallback(()=>{l(ge),c("")},[]),S=N.useCallback(d=>{l(o=>({...ge,...d.filters}))},[]),B=N.useMemo(()=>s.categories.length>0||s.loaders.length>0||s.minecraft_versions.length>0||s.authors.length>0||s.downloads!==void 0||s.lastUpdated!==void 0||a!=="",[s,a]),z=N.useMemo(()=>{let d=0;return s.categories.length>0&&(d+=s.categories.length),s.loaders.length>0&&(d+=s.loaders.length),s.minecraft_versions.length>0&&(d+=s.minecraft_versions.length),s.authors.length>0&&(d+=s.authors.length),s.downloads&&d++,s.lastUpdated&&d++,d},[s]);return N.useEffect(()=>{const d=Rt(s,a);e(d,{replace:!0})},[s,a,e]),{filters:s,facets:h,allFacets:u,facetsLoading:n,filterString:y,searchQuery:a,setSearchQuery:c,updateFilter:g,toggleFilterValue:w,clearFilters:x,applyPreset:S,hasActiveFilters:B,activeFilterCount:z}};function Vt(t){const e={...ge},s=t.get("cat");s&&(e.categories=s.split(","));const l=t.get("loader");l&&(e.loaders=l.split(","));const a=t.get("v");a&&(e.minecraft_versions=a.split(","));const c=t.get("author");c&&(e.authors=c.split(","));const u=t.get("sort");u&&(e.sort=u);const h=t.get("min_dl"),n=t.get("max_dl");return(h||n)&&(e.downloads={min:h?parseInt(h):void 0,max:n?parseInt(n):void 0}),e}function Rt(t,e){const s=new URLSearchParams;return e&&s.set("q",e),t.categories.length>0&&s.set("cat",t.categories.join(",")),t.loaders.length>0&&s.set("loader",t.loaders.join(",")),t.minecraft_versions.length>0&&s.set("v",t.minecraft_versions.join(",")),t.authors.length>0&&s.set("author",t.authors.join(",")),t.sort&&t.sort!=="relevance"&&s.set("sort",t.sort),t.downloads?.min!==void 0&&s.set("min_dl",t.downloads.min.toString()),t.downloads?.max!==void 0&&s.set("max_dl",t.downloads.max.toString()),s}const Ut=()=>{const t=W.c(44),[e,s]=N.useState(1);let l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],t[0]=l):l=t[0];const[a,c]=N.useState(l),{filters:u,facets:h,allFacets:n,filterString:y,searchQuery:g,setSearchQuery:w,updateFilter:x,clearFilters:S,applyPreset:B,hasActiveFilters:z,activeFilterCount:d}=Pt();let o;t[1]!==y||t[2]!==u.sort||t[3]!==e||t[4]!==g?(o={query:g,page:e,filterString:y,sort:u.sort,limit:16,includeFacets:!0},t[1]=y,t[2]=u.sort,t[3]=e,t[4]=g,t[5]=o):o=t[5];const{data:f,isLoading:m,isFetching:_,hasNextPage:b,facetDistribution:C}=Ge(o),i=m||_;let $;t[6]!==b||t[7]!==_||t[8]!==e?($=()=>{b&&!_&&(console.log("Loading more addons. Current page:",e),s(It))},t[6]=b,t[7]=_,t[8]=e,t[9]=$):$=t[9];let V;t[10]!==b||t[11]!==i||t[12]!==$?(V={loading:i,hasMore:b,onLoadMore:$},t[10]=b,t[11]=i,t[12]=$,t[13]=V):V=t[13];const{sentinelRef:L,loadingMore:T}=Je(V);let R;t[14]===Symbol.for("react.memo_cache_sentinel")?(R=()=>{c([]),s(1)},t[14]=R):R=t[14];let I;t[15]!==y||t[16]!==u.sort||t[17]!==g?(I=[y,g,u.sort],t[15]=y,t[16]=u.sort,t[17]=g,t[18]=I):I=t[18],N.useEffect(R,I);let F,U;t[19]!==f||t[20]!==e?(F=()=>{f&&f.length>0&&(console.log(`New hits fetched: ${f.length} items`),c(e===1?f:Z=>{const K=new Set(Z.map(Qt)),G=f.filter(J=>!K.has(J.$id));return G.length>0?[...Z,...G]:Z}))},U=[f,e],t[19]=f,t[20]=e,t[21]=F,t[22]=U):(F=t[21],U=t[22]),N.useEffect(F,U);let D;t[23]!==S?(D=()=>{S(),s(1),c([])},t[23]=S,t[24]=D):D=t[24];const H=D,q=qt,Q=n||C||h;let A;t[25]!==B||t[26]!==S||t[27]!==u||t[28]!==Q||t[29]!==x?(A=r.jsx(Nt,{filters:u,facets:Q,onFilterChange:x,onClearFilters:S,onApplyPreset:B}),t[25]=B,t[26]=S,t[27]=u,t[28]=Q,t[29]=x,t[30]=A):A=t[30];const k=A,E=`Addon Filters${d>0?` (${d})`:""}`,M=m&&e===1;let O;t[31]!==a||t[32]!==T||t[33]!==L||t[34]!==M?(O=r.jsx(We,{items:a,renderItem:q,isLoading:M,isError:!1,emptyMessage:"No addons found matching your filters.",infiniteScrollEnabled:!0,loadingMore:T,sentinelRef:L,animationEnabled:!0,animationDelay:.1,animationDuration:.4,staggerItemCount:16,skeletonCount:16}),t[31]=a,t[32]=T,t[33]=L,t[34]=M,t[35]=O):O=t[35];let j;return t[36]!==k||t[37]!==H||t[38]!==z||t[39]!==g||t[40]!==w||t[41]!==E||t[42]!==O?(j=r.jsx(He,{searchValue:g,onSearchChange:w,searchPlaceholder:"Search addons...",filters:k,onResetFilters:H,filterTitle:E,hasActiveFilters:z,children:O}),t[36]=k,t[37]=H,t[38]=z,t[39]=g,t[40]=w,t[41]=E,t[42]=O,t[43]=j):j=t[43],j};function It(t){return t+1}function Qt(t){return t.$id}function qt(t){return r.jsx(ct,{addon:t},t.$id)}function Ht(){const t=W.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(Ut,{}),t[0]=e):e=t[0],e}export{Ht as default};
