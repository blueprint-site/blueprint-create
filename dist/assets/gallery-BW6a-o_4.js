import{r as a,j as s}from"./radix-x8H_F-uE.js";import{l as Q,v as re,t as ce,m as W,j as A,D as ie,ab as ue,X as _,ac as he,c as me}from"./index-c6xvjn-C.js";import{C as ee,a as te,b as de,c as xe,d as se}from"./carousel-D-Hv_Hwp.js";import{L as fe}from"./loader-circle-CemQqhIU.js";import{C as ge}from"./chevron-left-CAE-gBj1.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],be=Q("rotate-cw",ye);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],we=Q("zoom-in",pe);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],je=Q("zoom-out",ve),ke=({images:x,currentIndex:e,onClose:h,alt:H="Gallery image"})=>{const[b,F]=a.useState(e),[o,T]=a.useState(1),[f,p]=a.useState(0),[g,d]=a.useState({x:0,y:0}),[r,Z]=a.useState(!1),[w,K]=a.useState({x:0,y:0}),[i,E]=a.useState({x:0,y:0}),[m,k]=a.useState({x:0,y:0}),[O,S]=a.useState(!0),[P,C]=a.useState(!1),U=a.useRef(null),q=a.useRef(null);a.useEffect(()=>{T(1),p(0),d({x:0,y:0}),E({x:0,y:0}),k({x:0,y:0}),S(!0),C(!1)},[b]),a.useEffect(()=>{const n=t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement))switch(t.key){case"Escape":h();break;case"ArrowLeft":t.preventDefault(),N();break;case"ArrowRight":t.preventDefault(),M();break;case"+":case"=":t.preventDefault(),L();break;case"-":t.preventDefault(),R();break;case"0":t.preventDefault(),z();break;case"r":case"R":t.preventDefault(),D();break}};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[b,x.length]);const N=a.useCallback(()=>{F(n=>(n-1+x.length)%x.length)},[x.length]),M=a.useCallback(()=>{F(n=>(n+1)%x.length)},[x.length]),L=a.useCallback(()=>{const n=Math.min(o*1.2,5),t=n/o;T(n),d(l=>({x:l.x*t,y:l.y*t}))},[o]),R=a.useCallback(()=>{const n=Math.max(o/1.2,.1),t=n/o;T(n),d(l=>({x:l.x*t,y:l.y*t}))},[o]),D=a.useCallback(()=>{p(n=>(n+90)%360)},[]),z=a.useCallback(()=>{T(1),p(0),d({x:0,y:0}),E({x:0,y:0}),k({x:0,y:0})},[]),X=a.useCallback(n=>{if(o<=1)return;n.preventDefault(),Z(!0),k({x:0,y:0});const t=n.currentTarget.getBoundingClientRect(),l=n.clientX-t.left,c=n.clientY-t.top;K({x:l-g.x,y:c-g.y}),E({x:n.clientX,y:n.clientY})},[o,g]),Y=a.useCallback(n=>{if(!r||o<=1)return;n.preventDefault();const t=n.currentTarget.getBoundingClientRect(),l=n.clientX-t.left,c=n.clientY-t.top,y=l-w.x,V=c-w.y,G=n.clientX-i.x,J=n.clientY-i.y;d({x:y,y:V}),k({x:G,y:J}),E({x:n.clientX,y:n.clientY})},[r,w,o,i]),I=a.useCallback(()=>{if(r&&(Z(!1),Math.abs(m.x)>2||Math.abs(m.y)>2)){let t=m.x*.85,l=m.y*.85;const c=()=>{Math.abs(t)<.5&&Math.abs(l)<.5||(d(y=>({x:y.x+t,y:y.y+l})),t*=.92,l*=.92,requestAnimationFrame(c))};requestAnimationFrame(c)}},[r,m]),$=a.useCallback(n=>{if(o<=1||n.touches.length!==1)return;n.preventDefault();const t=n.touches[0],l=n.currentTarget.getBoundingClientRect(),c=t.clientX-l.left,y=t.clientY-l.top;Z(!0),k({x:0,y:0}),K({x:c-g.x,y:y-g.y}),E({x:t.clientX,y:t.clientY})},[o,g]),B=a.useCallback(n=>{if(!r||o<=1||n.touches.length!==1)return;n.preventDefault();const t=n.touches[0],l=n.currentTarget.getBoundingClientRect(),c=t.clientX-l.left,y=t.clientY-l.top,V=c-w.x,G=y-w.y,J=t.clientX-i.x,le=t.clientY-i.y;d({x:V,y:G}),k({x:J,y:le}),E({x:t.clientX,y:t.clientY})},[r,w,o,i]),u=a.useCallback(()=>{if(r&&(Z(!1),Math.abs(m.x)>1||Math.abs(m.y)>1)){let t=m.x*1.2,l=m.y*1.2;const c=()=>{Math.abs(t)<.3&&Math.abs(l)<.3||(d(y=>({x:y.x+t,y:y.y+l})),t*=.9,l*=.9,requestAnimationFrame(c))};requestAnimationFrame(c)}},[r,m]),v=a.useCallback(n=>{n.preventDefault();const t=.15,l=n.deltaY<0?1+t:1-t,c=Math.max(.1,Math.min(5,o*l));if(c===o)return;const y=c/o,V=g.x*y,G=g.y*y;T(c),d({x:V,y:G})},[o,g]),j=a.useCallback(()=>{S(!1),C(!1)},[]),ne=a.useCallback(()=>{S(!1),C(!0)},[]),ae=a.useCallback(async()=>{try{const t=await(await fetch(x[b])).blob(),l=window.URL.createObjectURL(t),c=document.createElement("a");c.href=l,c.download=`image-${b+1}.${t.type.split("/")[1]||"jpg"}`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}catch(n){console.error("Failed to download image:",n)}},[x,b]),oe=x[b];return s.jsx(re,{open:!0,onOpenChange:h,children:s.jsxs(ce,{ref:q,className:W("w-screen h-screen max-w-none max-h-none p-0 border-none bg-black/95 backdrop-blur-sm","data-[state=open]:duration-300 data-[state=closed]:duration-200"),"aria-label":`Image ${b+1} of ${x.length}`,children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 z-50 bg-gradient-to-b from-black/80 to-transparent p-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"flex items-center gap-2 text-white",children:s.jsxs("span",{className:"text-lg font-medium",children:[b+1," / ",x.length]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(A,{variant:"ghost",size:"sm",onClick:R,disabled:o<=.1,className:"text-white hover:bg-white/20",title:"Zoom out (-)",children:s.jsx(je,{className:"h-4 w-4"})}),s.jsxs("span",{className:"text-white text-sm min-w-[3rem] text-center",children:[Math.round(o*100),"%"]}),s.jsx(A,{variant:"ghost",size:"sm",onClick:L,disabled:o>=5,className:"text-white hover:bg-white/20",title:"Zoom in (+)",children:s.jsx(we,{className:"h-4 w-4"})}),s.jsx(A,{variant:"ghost",size:"sm",onClick:D,className:"text-white hover:bg-white/20",title:"Rotate (R)",children:s.jsx(be,{className:"h-4 w-4"})}),s.jsx(A,{variant:"ghost",size:"sm",onClick:ae,className:"text-white hover:bg-white/20",title:"Download image",children:s.jsx(ie,{className:"h-4 w-4"})}),s.jsx(ue,{asChild:!0,children:s.jsx(A,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",title:"Close (Esc)",children:s.jsx(_,{className:"h-4 w-4"})})})]})]})}),s.jsxs("div",{className:W("flex-1 flex items-center justify-center relative overflow-hidden transition-transform duration-75",r?"cursor-grabbing":o>1?"cursor-grab":"cursor-default"),onMouseDown:X,onMouseMove:Y,onMouseUp:I,onMouseLeave:I,onWheel:v,onTouchStart:$,onTouchMove:B,onTouchEnd:u,style:{touchAction:o>1?"none":"auto"},children:[O&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:s.jsx(fe,{className:"h-8 w-8 animate-spin text-white"})}),P?s.jsxs("div",{className:"text-white text-center",children:[s.jsx(_,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"Failed to load image"})]}):s.jsx("img",{ref:U,src:oe,alt:`${H} ${b+1}`,className:W("max-w-full max-h-full object-contain select-none pointer-events-none","transition-transform duration-75 ease-out"),style:{transform:`translate(${g.x}px, ${g.y}px) scale(${o}) rotate(${f}deg)`,transformOrigin:"center center"},onLoad:j,onError:ne,draggable:!1})]}),x.length>1&&s.jsxs(s.Fragment,{children:[s.jsx(A,{variant:"ghost",size:"lg",onClick:N,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/20 z-40",title:"Previous image (←)",children:s.jsx(ge,{className:"h-8 w-8"})}),s.jsx(A,{variant:"ghost",size:"lg",onClick:M,className:"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/20 z-40",title:"Next image (→)",children:s.jsx(he,{className:"h-8 w-8"})})]}),x.length>1&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:s.jsx("div",{className:"flex justify-center gap-2 overflow-x-auto max-w-full",children:x.map((n,t)=>s.jsx("button",{onClick:()=>F(t),className:W("flex-shrink-0 w-16 h-16 rounded border-2 overflow-hidden transition-all",t===b?"border-white shadow-lg scale-110":"border-white/30 hover:border-white/60"),title:`Go to image ${t+1}`,children:s.jsx("img",{src:n,alt:`Thumbnail ${t+1}`,className:"w-full h-full object-cover"})},t))})}),s.jsx("div",{className:"absolute bottom-20 left-1/2 -translate-x-1/2 text-white/70 text-sm text-center opacity-60 animate-pulse",children:s.jsx("p",{children:"Arrow keys: navigate • Mouse wheel: zoom • Drag: pan • R: rotate • 0: reset"})})]})})},De=x=>{const e=me.c(55),{images:h,enableLightbox:H,alt:b,showNavigation:F,className:o,initialIndex:T}=x,f=H===void 0?!1:H,p=b===void 0?"":b,g=F===void 0?!1:F,d=T===void 0?0:T,[r,Z]=a.useState(null),[w,K]=a.useState(null),[i,E]=a.useState(d),[m,k]=a.useState(!1);let O,S;e[0]!==r||e[1]!==w?(O=()=>{if(!r||!w)return;const u=()=>{const v=r.selectedScrollSnap();E(v),w.scrollTo(v)};return r.on("select",u),()=>{r.off("select",u)}},S=[r,w],e[0]=r,e[1]=w,e[2]=O,e[3]=S):(O=e[2],S=e[3]),a.useEffect(O,S);let P;e[4]!==r?(P=u=>{r?.scrollTo(u)},e[4]=r,e[5]=P):P=e[5];const C=P;let U,q;e[6]!==i||e[7]!==f||e[8]!==h.length||e[9]!==m||e[10]!==r?(U=()=>{if(!f||!m)return;const u=v=>{v.key==="ArrowRight"&&r?.scrollTo((i+1)%h.length),v.key==="ArrowLeft"&&r?.scrollTo((i-1+h.length)%h.length),v.key==="Escape"&&k(!1)};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},q=[f,m,i,h.length,r],e[6]=i,e[7]=f,e[8]=h.length,e[9]=m,e[10]=r,e[11]=U,e[12]=q):(U=e[11],q=e[12]),a.useEffect(U,q);let N;e[13]!==d?(N={startIndex:d},e[13]=d,e[14]=N):N=e[14];let M;if(e[15]!==p||e[16]!==f||e[17]!==h){let u;e[19]!==p||e[20]!==f?(u=(v,j)=>s.jsx(ee,{className:"flex justify-center items-center",children:s.jsx("img",{src:v,alt:p||`Image ${j+1}`,loading:"lazy",onClick:f?()=>k(!0):void 0,style:{cursor:f?"zoom-in":void 0},tabIndex:0,"aria-label":`Open image ${j+1} in lightbox`})},j),e[19]=p,e[20]=f,e[21]=u):u=e[21],M=h.map(u),e[15]=p,e[16]=f,e[17]=h,e[18]=M}else M=e[18];let L;e[22]!==M?(L=s.jsx(te,{children:M}),e[22]=M,e[23]=L):L=e[23];let R;e[24]!==g?(R=g&&s.jsxs(s.Fragment,{children:[s.jsx(de,{}),s.jsx(xe,{})]}),e[24]=g,e[25]=R):R=e[25];let D;e[26]!==N||e[27]!==L||e[28]!==R?(D=s.jsxs(se,{setApi:Z,opts:N,"aria-label":"Image gallery",children:[L,R]}),e[26]=N,e[27]=L,e[28]=R,e[29]=D):D=e[29];let z;e[30]!==d?(z={dragFree:!0,startIndex:d},e[30]=d,e[31]=z):z=e[31];let X;if(e[32]!==i||e[33]!==h||e[34]!==C){let u;e[36]!==i||e[37]!==C?(u=(v,j)=>s.jsx(ee,{className:"basis-1/7 flex justify-center items-center aspect-video",children:s.jsx("button",{onClick:()=>C(j),className:i===j?"ring-2 ring-primary":"","aria-label":`Select image ${j+1}`,children:s.jsx("img",{src:v,alt:`Thumbnail ${j+1}`,loading:"lazy"})})},j),e[36]=i,e[37]=C,e[38]=u):u=e[38],X=h.map(u),e[32]=i,e[33]=h,e[34]=C,e[35]=X}else X=e[35];let Y;e[39]!==X?(Y=s.jsx(te,{children:X}),e[39]=X,e[40]=Y):Y=e[40];let I;e[41]!==z||e[42]!==Y?(I=s.jsx(se,{setApi:K,opts:z,"aria-label":"Image thumbnails",children:Y}),e[41]=z,e[42]=Y,e[43]=I):I=e[43];let $;e[44]!==p||e[45]!==i||e[46]!==f||e[47]!==h||e[48]!==m?($=f&&m&&s.jsx(ke,{images:h,currentIndex:i,onClose:()=>k(!1),alt:p}),e[44]=p,e[45]=i,e[46]=f,e[47]=h,e[48]=m,e[49]=$):$=e[49];let B;return e[50]!==o||e[51]!==D||e[52]!==I||e[53]!==$?(B=s.jsxs("div",{className:o,children:[D,I,$]}),e[50]=o,e[51]=D,e[52]=I,e[53]=$,e[54]=B):B=e[54],B};export{De as G};
