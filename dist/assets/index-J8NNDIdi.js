import{r as b,j as s,R as H}from"./radix-x8H_F-uE.js";import{c as le,aH as ke,aI as Ge,aJ as et,aK as He,aL as be,j as Y,I as ne,A as tt,N as $e,Q as st,R as rt,P as lt,T as at,V as nt,aM as ot,aN as ct,aO as it,aP as ut,x as dt,aE as ft,w as mt,aQ as gt,aR as ze,aS as fe,f as Ce,g as ht,aT as Ne,aU as Ke,aV as pt,aW as xt,aX as vt,aY as bt,u as jt,aZ as _t,aA as yt,at as wt,ao as Ct,az as Nt,au as St,aw as we,a5 as Tt,a6 as Et,a7 as Mt,a_ as je,a4 as kt,a as De}from"./index-CV_NrdTx.js";import{C as It}from"./circle-x-Bk-HpeAp.js";import{M as Ft}from"./MarkdownEditor-HzB9fAcX.js";import{a as Pt}from"./index.esm-B9Q8rItI.js";import{a as $t}from"./zod-BQfcmrF9.js";import{P as Dt}from"./plus-DAvlroUo.js";import{d as Rt,e as Ve,h as qe,u as At,f as Oe,c as Bt,b as Lt,a as Ut,g as Ht}from"./tanstack-aN5NUOUd.js";import{a as zt,b as Re,c as Ae,T as Kt}from"./tabs-CB4bczku.js";import"./animation-RShxBXpy.js";import"./extends-CF3RwP-h.js";const Ie="main",Fe="blog_tags",Vt=()=>{const t=le.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:["blogTags"],queryFn:Qt,staleTime:3e5},t[0]=e):e=t[0],Rt(e)},qt=()=>{const t=le.c(2),e=Ve();let r;return t[0]!==e?(r={mutationFn:Xt,onSuccess:()=>{e.invalidateQueries({queryKey:["blogTags"]})}},t[0]=e,t[1]=r):r=t[1],qe(r)},Ot=()=>{const t=le.c(2),e=Ve();let r;return t[0]!==e?(r={mutationFn:Yt,onSuccess:()=>{e.invalidateQueries({queryKey:["blogTags"]})}},t[0]=e,t[1]=r):r=t[1],qe(r)};async function Qt(){try{return(await ke.listDocuments(Ie,Fe,[Ge.limit(100)])).documents}catch(t){const e=t;throw console.error("Error fetching blog tags:",e),e}}async function Xt(t){try{const e=et.parse(t),r=await ke.createDocument(Ie,Fe,He.unique(),e);return be({className:"bg-surface-3 border-ring text-foreground",title:"âœ… Tag created successfully"}),r}catch(e){const r=e;throw console.error("Error creating blog tag:",r),be({className:"bg-surface-3 border-ring text-foreground",title:"âŒ Error creating tag",description:r instanceof Error?r.message:"Unknown error occurred"}),r}}async function Yt(t){try{await ke.deleteDocument(Ie,Fe,t),be({className:"bg-surface-3 border-ring text-foreground",title:"âœ… Tag deleted successfully"})}catch(e){const r=e;throw console.error("Error deleting blog tag:",r),be({className:"bg-surface-3 border-ring text-foreground",title:"âŒ Error deleting tag",description:r instanceof Error?r.message:"Unknown error occurred"}),r}}const Jt=({value:t,onChange:e})=>{const[r,l]=b.useState(t||null),[a,n]=b.useState(""),[i,c]=b.useState(!1),u=b.useRef(null);b.useEffect(()=>{t&&l(t)},[t]);const d=async y=>{const x=y.target.files?.[0];if(x){c(!0);try{const f=(await $e.createFile("67b478dd00221462624e",He.unique(),x)).$id,o=$e.getFilePreview("67b478dd00221462624e",f);l(o),n(o),e(o)}catch(v){console.error("Upload failed:",v)}finally{c(!1)}}},h=()=>{u.current&&u.current.click()},_=y=>{const x=y.target.value;n(x),l(x),e(x||void 0)},j=()=>{l(null),n(""),e(void 0)};return s.jsxs("div",{children:[r?s.jsxs("div",{className:"relative w-full py-4",children:[s.jsx("img",{src:r,alt:"Preview",className:"max-h-40 w-full rounded-lg object-cover shadow-md"}),s.jsx(Y,{size:"icon",variant:"ghost",className:"absolute top-2 right-2 text-red-500 hover:text-red-700",onClick:j,children:s.jsx(It,{size:20})})]}):s.jsx("p",{className:"text-center text-gray-500",children:"No Image selected"}),s.jsx("div",{className:"w-full py-4",children:s.jsx(ne,{type:"text",value:a,placeholder:"Or enter url...",onChange:_})}),s.jsxs("div",{className:"w-full py-4",children:[s.jsxs(Y,{variant:"outline",className:"flex w-full gap-2",type:"button",onClick:h,disabled:i,children:[s.jsx(tt,{size:18})," ",i?"Uploading...":"Select image"]}),s.jsx(ne,{ref:u,type:"file",accept:"image/*",className:"hidden",onChange:d,disabled:i})]})]})};function _e(){return(_e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(t[l]=r[l])}return t}).apply(this,arguments)}function Qe(t,e){if(t==null)return{};var r,l,a={},n=Object.keys(t);for(l=0;l<n.length;l++)e.indexOf(r=n[l])>=0||(a[r]=t[r]);return a}function Se(t){var e=b.useRef(t),r=b.useRef(function(l){e.current&&e.current(l)});return e.current=t,r.current}var ge=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t<e?e:t},me=function(t){return"touches"in t},Te=function(t){return t&&t.ownerDocument.defaultView||self},Be=function(t,e,r){var l=t.getBoundingClientRect(),a=me(e)?function(n,i){for(var c=0;c<n.length;c++)if(n[c].identifier===i)return n[c];return n[0]}(e.touches,r):e;return{left:ge((a.pageX-(l.left+Te(t).pageXOffset))/l.width),top:ge((a.pageY-(l.top+Te(t).pageYOffset))/l.height)}},Le=function(t){!me(t)&&t.preventDefault()},Xe=H.memo(function(t){var e=t.onMove,r=t.onKey,l=Qe(t,["onMove","onKey"]),a=b.useRef(null),n=Se(e),i=Se(r),c=b.useRef(null),u=b.useRef(!1),d=b.useMemo(function(){var y=function(f){Le(f),(me(f)?f.touches.length>0:f.buttons>0)&&a.current?n(Be(a.current,f,c.current)):v(!1)},x=function(){return v(!1)};function v(f){var o=u.current,p=Te(a.current),m=f?p.addEventListener:p.removeEventListener;m(o?"touchmove":"mousemove",y),m(o?"touchend":"mouseup",x)}return[function(f){var o=f.nativeEvent,p=a.current;if(p&&(Le(o),!function(g,w){return w&&!me(g)}(o,u.current)&&p)){if(me(o)){u.current=!0;var m=o.changedTouches||[];m.length&&(c.current=m[0].identifier)}p.focus(),n(Be(p,o,c.current)),v(!0)}},function(f){var o=f.which||f.keyCode;o<37||o>40||(f.preventDefault(),i({left:o===39?.05:o===37?-.05:0,top:o===40?.05:o===38?-.05:0}))},v]},[i,n]),h=d[0],_=d[1],j=d[2];return b.useEffect(function(){return j},[j]),H.createElement("div",_e({},l,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:a,onKeyDown:_,tabIndex:0,role:"slider"}))}),Pe=function(t){return t.filter(Boolean).join(" ")},Ye=function(t){var e=t.color,r=t.left,l=t.top,a=l===void 0?.5:l,n=Pe(["react-colorful__pointer",t.className]);return H.createElement("div",{className:n,style:{top:100*a+"%",left:100*r+"%"}},H.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},U=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r},Wt=function(t){return ss(Ee(t))},Ee=function(t){return t[0]==="#"&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?U(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:t.length===8?U(parseInt(t.substring(6,8),16)/255,2):1}},Zt=function(t){return ts(es(t))},Gt=function(t){var e=t.s,r=t.v,l=t.a,a=(200-e)*r/100;return{h:U(t.h),s:U(a>0&&a<200?e*r/100/(a<=100?a:200-a)*100:0),l:U(a/2),a:U(l,2)}},Me=function(t){var e=Gt(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},es=function(t){var e=t.h,r=t.s,l=t.v,a=t.a;e=e/360*6,r/=100,l/=100;var n=Math.floor(e),i=l*(1-r),c=l*(1-(e-n)*r),u=l*(1-(1-e+n)*r),d=n%6;return{r:U(255*[l,c,i,i,u,l][d]),g:U(255*[u,l,l,c,i,i][d]),b:U(255*[i,i,u,l,l,c][d]),a:U(a,2)}},ve=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},ts=function(t){var e=t.r,r=t.g,l=t.b,a=t.a,n=a<1?ve(U(255*a)):"";return"#"+ve(e)+ve(r)+ve(l)+n},ss=function(t){var e=t.r,r=t.g,l=t.b,a=t.a,n=Math.max(e,r,l),i=n-Math.min(e,r,l),c=i?n===e?(r-l)/i:n===r?2+(l-e)/i:4+(e-r)/i:0;return{h:U(60*(c<0?c+6:c)),s:U(n?i/n*100:0),v:U(n/255*100),a}},rs=H.memo(function(t){var e=t.hue,r=t.onChange,l=Pe(["react-colorful__hue",t.className]);return H.createElement("div",{className:l},H.createElement(Xe,{onMove:function(a){r({h:360*a.left})},onKey:function(a){r({h:ge(e+360*a.left,0,360)})},"aria-label":"Hue","aria-valuenow":U(e),"aria-valuemax":"360","aria-valuemin":"0"},H.createElement(Ye,{className:"react-colorful__hue-pointer",left:e/360,color:Me({h:e,s:100,v:100,a:1})})))}),ls=H.memo(function(t){var e=t.hsva,r=t.onChange,l={backgroundColor:Me({h:e.h,s:100,v:100,a:1})};return H.createElement("div",{className:"react-colorful__saturation",style:l},H.createElement(Xe,{onMove:function(a){r({s:100*a.left,v:100-100*a.top})},onKey:function(a){r({s:ge(e.s+100*a.left,0,100),v:ge(e.v-100*a.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+U(e.s)+"%, Brightness "+U(e.v)+"%"},H.createElement(Ye,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:Me(e)})))}),Je=function(t,e){if(t===e)return!0;for(var r in t)if(t[r]!==e[r])return!1;return!0},as=function(t,e){return t.toLowerCase()===e.toLowerCase()||Je(Ee(t),Ee(e))};function ns(t,e,r){var l=Se(r),a=b.useState(function(){return t.toHsva(e)}),n=a[0],i=a[1],c=b.useRef({color:e,hsva:n});b.useEffect(function(){if(!t.equal(e,c.current.color)){var d=t.toHsva(e);c.current={hsva:d,color:e},i(d)}},[e,t]),b.useEffect(function(){var d;Je(n,c.current.hsva)||t.equal(d=t.fromHsva(n),c.current.color)||(c.current={hsva:n,color:d},l(d))},[n,t,l]);var u=b.useCallback(function(d){i(function(h){return Object.assign({},h,d)})},[]);return[n,u]}var os=typeof window<"u"?b.useLayoutEffect:b.useEffect,cs=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},Ue=new Map,is=function(t){os(function(){var e=t.current?t.current.ownerDocument:document;if(e!==void 0&&!Ue.has(e)){var r=e.createElement("style");r.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,Ue.set(e,r);var l=cs();l&&r.setAttribute("nonce",l),e.head.appendChild(r)}},[])},us=function(t){var e=t.className,r=t.colorModel,l=t.color,a=l===void 0?r.defaultColor:l,n=t.onChange,i=Qe(t,["className","colorModel","color","onChange"]),c=b.useRef(null);is(c);var u=ns(r,a,n),d=u[0],h=u[1],_=Pe(["react-colorful",e]);return H.createElement("div",_e({},i,{ref:c,className:_}),H.createElement(ls,{hsva:d,onChange:h}),H.createElement(rs,{hue:d.h,onChange:h,className:"react-colorful__last-control"}))},ds={defaultColor:"000",toHsva:Wt,fromHsva:function(t){return Zt({h:t.h,s:t.s,v:t.v,a:1})},equal:as},fs=function(t){return H.createElement(us,_e({},t,{colorModel:ds}))};function ms(t){const e=le.c(78),{tags:r,selectedTags:l,isLoading:a,onCreate:n,onDelete:i,onChange:c,className:u}=t;let d;e[0]!==r?(d=r===void 0?[]:r,e[0]=r,e[1]=d):d=e[1];const h=d;let _;e[2]!==l?(_=l===void 0?[]:l,e[2]=l,e[3]=_):_=e[3];const j=_,y=a===void 0?!1:a,[x,v]=b.useState(j);let f;e[4]===Symbol.for("react.memo_cache_sentinel")?(f={resolver:$t(ut),defaultValues:{value:"",color:"#3498db"}},e[4]=f):f=e[4];const{register:o,handleSubmit:p,reset:m,watch:g,setValue:w,formState:q}=Pt(f),{errors:S,isSubmitting:O}=q;let M;e[5]!==g?(M=g("color"),e[5]=g,e[6]=M):M=e[6];const k=M;let z,I;e[7]!==j?(I=()=>{v(j)},z=[j],e[7]=j,e[8]=z,e[9]=I):(z=e[8],I=e[9]),b.useEffect(I,z);let F,D,R,P,C;if(e[10]!==u||e[11]!==p||e[12]!==y||e[13]!==c||e[14]!==n||e[15]!==i||e[16]!==m||e[17]!==h){const te=async function(L){try{const X=await n(L);C(X),m()}catch(X){console.error("Error creating tag:",X)}};let he;e[23]!==c||e[24]!==i?(he=async function(L,X){X?.stopPropagation();try{await i(L),v(ue=>{const ce=ue.filter(de=>de.$id!==L);return c?.(ce),ce})}catch(ue){console.error("Error deleting tag:",ue)}},e[23]=c,e[24]=i,e[25]=he):he=e[25];const ie=he;C=function(L){v(X=>{const ce=X.find(de=>de.$id===L.$id)?X.filter(de=>de.$id!==L.$id):[...X,L];return c?.(ce),ce})},P=u,D="flex flex-row gap-4";const ye=y?"Loading tags...":"Select tags";let pe;e[26]!==ye?(pe=s.jsx(st,{className:"cursor-pointer",children:s.jsx(rt,{placeholder:ye})}),e[26]=ye,e[27]=pe):pe=e[27];let oe;if(e[28]!==ie||e[29]!==h){let se;e[31]!==ie?(se=L=>s.jsx(lt,{value:L.value,className:"cursor-pointer",children:s.jsxs("div",{className:"flex w-full items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"mr-2 h-3 w-3 rounded-full",style:{backgroundColor:L.color}}),s.jsx("span",{children:L.value})]}),s.jsx(Y,{variant:"ghost",size:"sm",onClick:X=>ie(L.$id,X),className:"ml-2 h-auto p-1",children:"âŒ"})]})},L.$id),e[31]=ie,e[32]=se):se=e[32],oe=h.map(se),e[28]=ie,e[29]=h,e[30]=oe}else oe=e[30];let xe;e[33]!==oe?(xe=s.jsx(at,{className:"bg-surface-1",children:oe}),e[33]=oe,e[34]=xe):xe=e[34],R=s.jsx("div",{className:"flex-1",children:s.jsxs(nt,{onValueChange:se=>{const L=h.find(X=>X.value===se);L&&C(L)},disabled:y,children:[pe,xe]})}),F=p(te),e[10]=u,e[11]=p,e[12]=y,e[13]=c,e[14]=n,e[15]=i,e[16]=m,e[17]=h,e[18]=F,e[19]=D,e[20]=R,e[21]=P,e[22]=C}else F=e[18],D=e[19],R=e[20],P=e[21],C=e[22];let A;e[35]!==o?(A=o("value"),e[35]=o,e[36]=A):A=e[36];let N;e[37]!==A?(N=s.jsx(ne,{...A,placeholder:"New tag name",className:"w-36"}),e[37]=A,e[38]=N):N=e[38];let $;e[39]!==S.value?($=S.value&&s.jsx("p",{className:"text-destructive mt-1 text-xs",children:S.value.message}),e[39]=S.value,e[40]=$):$=e[40];let K;e[41]!==N||e[42]!==$?(K=s.jsxs("div",{children:[N,$]}),e[41]=N,e[42]=$,e[43]=K):K=e[43];let T;e[44]!==k?(T=s.jsx(ot,{className:"h-10 w-10 rounded border",style:{backgroundColor:k}}),e[44]=k,e[45]=T):T=e[45];let V;e[46]!==w?(V=te=>w("color",te),e[46]=w,e[47]=V):V=e[47];let Q;e[48]!==V||e[49]!==k?(Q=s.jsx(ct,{className:"p-2",children:s.jsx(fs,{color:k,onChange:V})}),e[48]=V,e[49]=k,e[50]=Q):Q=e[50];let J;e[51]!==T||e[52]!==Q?(J=s.jsxs(it,{children:[T,Q]}),e[51]=T,e[52]=Q,e[53]=J):J=e[53];let ee;e[54]!==S.color?(ee=S.color&&s.jsx("p",{className:"text-destructive mt-1 text-xs",children:S.color.message}),e[54]=S.color,e[55]=ee):ee=e[55];let W;e[56]!==J||e[57]!==ee?(W=s.jsxs("div",{children:[J,ee]}),e[56]=J,e[57]=ee,e[58]=W):W=e[58];let Z;e[59]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx(Dt,{size:16}),e[59]=Z):Z=e[59];let G;e[60]!==O?(G=s.jsx(Y,{type:"submit",className:"cursor-pointer",disabled:O,children:Z}),e[60]=O,e[61]=G):G=e[61];let E;e[62]!==F||e[63]!==K||e[64]!==W||e[65]!==G?(E=s.jsxs("form",{onSubmit:F,className:"flex flex-row gap-2",children:[K,W,G]}),e[62]=F,e[63]=K,e[64]=W,e[65]=G,e[66]=E):E=e[66];let B;e[67]!==D||e[68]!==R||e[69]!==E?(B=s.jsxs("div",{className:D,children:[R,E]}),e[67]=D,e[68]=R,e[69]=E,e[70]=B):B=e[70];let re;e[71]!==x||e[72]!==C?(re=x.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"mt-3 mb-1 text-sm",children:"Selected Tags:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(te=>s.jsx("span",{className:"cursor-pointer rounded px-2 py-1 text-sm",style:{backgroundColor:te.color,color:gs(te.color)},onClick:()=>C(te),children:te.value},te.$id))})]}),e[71]=x,e[72]=C,e[73]=re):re=e[73];let ae;return e[74]!==P||e[75]!==B||e[76]!==re?(ae=s.jsxs("div",{className:P,children:[B,re]}),e[74]=P,e[75]=B,e[76]=re,e[77]=ae):ae=e[77],ae}function gs(t){const e=t.replace("#",""),r=parseInt(e.length===3?e[0]+e[0]:e.substring(0,2),16),l=parseInt(e.length===3?e[1]+e[1]:e.substring(2,4),16),a=parseInt(e.length===3?e[2]+e[2]:e.substring(4,6),16);return(.299*r+.587*l+.114*a)/255>.5?"#000000":"#FFFFFF"}const We=()=>{const t=le.c(53),{id:e}=dt(),r=e==="new",{toast:l}=ft(),a=mt(hs),{data:n,isLoading:i}=gt(e),c=ze(),[u,d]=b.useState(null),{data:h,isLoading:_}=Vt();let j;t[0]!==h?(j=h===void 0?[]:h,t[0]=h,t[1]=j):j=t[1];const y=j,x=qt(),v=Ot();let f,o;t[2]!==n||t[3]!==e||t[4]!==r||t[5]!==a?(f=()=>{a&&d(e&&!r&&n?n:{title:"",content:"",slug:"",img_url:"",status:"draft",tags:[],likes:0,authors_uuid:[a?.$id||""],authors:[a?.name||""]})},o=[e,n,r,a],t[2]=n,t[3]=e,t[4]=r,t[5]=a,t[6]=f,t[7]=o):(f=t[6],o=t[7]),b.useEffect(f,o);let p;t[8]===Symbol.for("react.memo_cache_sentinel")?(p=E=>{const{name:B,value:re}=E.target;d(ae=>ae?{...ae,[B]:re}:null)},t[8]=p):p=t[8];const m=p;let g;t[9]===Symbol.for("react.memo_cache_sentinel")?(g=E=>{d(B=>B?{...B,tags:E}:null)},t[9]=g):g=t[9];const w=g;let q;t[10]!==u||t[11]!==c||t[12]!==l?(q=async()=>{if(!u||!u.title||!u.content){l({className:"bg-surface-3 border-ring text-foreground",title:"âš ï¸ Missing Fields âš ï¸",description:"Title and content are required!"});return}c.mutate(u,{onSuccess:()=>{l({className:"bg-surface-3 border-ring text-foreground",title:"âœ… Success âœ…",description:`${u.title} has been saved successfully!`})},onError:()=>{l({className:"bg-surface-3 border-ring text-foreground",title:"âŒ Error âŒ",description:`Failed to save ${u.title}. Please try again!`})}})},t[10]=u,t[11]=c,t[12]=l,t[13]=q):q=t[13];const S=q;if(i){let E;return t[14]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx("div",{children:"Loading..."}),t[14]=E):E=t[14],E}const O=c.isPending?"Saving...":"Save";let M;t[15]!==S||t[16]!==c.isPending||t[17]!==O?(M=s.jsx("div",{className:"flex justify-end",children:s.jsx(Y,{onClick:S,disabled:c.isPending,children:O})}),t[15]=S,t[16]=c.isPending,t[17]=O,t[18]=M):M=t[18];let k;t[19]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(fe,{htmlFor:"title",children:"Title"}),t[19]=k):k=t[19];const z=u?.title||"";let I;t[20]!==z?(I=s.jsxs("div",{className:"space-y-2",children:[k,s.jsx(ne,{id:"title",name:"title",value:z,onChange:m,placeholder:"Enter a title"})]}),t[20]=z,t[21]=I):I=t[21];let F;t[22]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(fe,{htmlFor:"slug",children:"Slug"}),t[22]=F):F=t[22];const D=u?.slug||"";let R;t[23]!==D?(R=s.jsxs("div",{className:"space-y-2",children:[F,s.jsx(ne,{id:"slug",name:"slug",value:D,onChange:m,placeholder:"auto-generated-slug"})]}),t[23]=D,t[24]=R):R=t[24];let P;t[25]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx(fe,{children:"Tags"}),t[25]=P):P=t[25];let C;t[26]!==u?.tags?(C=u?.tags||[],t[26]=u?.tags,t[27]=C):C=t[27];let A;t[28]!==y||t[29]!==x.mutateAsync||t[30]!==v.mutateAsync||t[31]!==_||t[32]!==C?(A=s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[P,s.jsx(ms,{tags:y,selectedTags:C,isLoading:_,onCreate:x.mutateAsync,onDelete:v.mutateAsync,onChange:w})]}),t[28]=y,t[29]=x.mutateAsync,t[30]=v.mutateAsync,t[31]=_,t[32]=C,t[33]=A):A=t[33];let N;t[34]!==I||t[35]!==R||t[36]!==A?(N=s.jsxs("div",{className:"grid flex-1 grid-cols-1 gap-4 md:grid-cols-2",children:[I,R,A]}),t[34]=I,t[35]=R,t[36]=A,t[37]=N):N=t[37];let $;t[38]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx(fe,{children:"Cover Image"}),t[38]=$):$=t[38];const K=u?.img_url;let T;t[39]===Symbol.for("react.memo_cache_sentinel")?(T=E=>d(B=>B?{...B,img_url:E??void 0}:null),t[39]=T):T=t[39];let V;t[40]!==K?(V=s.jsxs("div",{className:"w-full space-y-2 md:w-1/3",children:[$,s.jsx("div",{className:"flex flex-col gap-2",children:s.jsx(Jt,{value:K,onChange:T})})]}),t[40]=K,t[41]=V):V=t[41];let Q;t[42]!==N||t[43]!==V?(Q=s.jsxs("div",{className:"flex w-full flex-col gap-6 md:flex-row md:items-start",children:[N,V]}),t[42]=N,t[43]=V,t[44]=Q):Q=t[44];let J;t[45]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx(fe,{className:"text-base",children:"Content"}),t[45]=J):J=t[45];const ee=u?.content??"";let W;t[46]===Symbol.for("react.memo_cache_sentinel")?(W=E=>d(B=>B?{...B,content:E??void 0}:null),t[46]=W):W=t[46];let Z;t[47]!==ee?(Z=s.jsxs("div",{className:"space-y-2",children:[J,s.jsx("div",{className:"rounded-md border",children:s.jsx(Ft,{value:ee,onChange:W})})]}),t[47]=ee,t[48]=Z):Z=t[48];let G;return t[49]!==Q||t[50]!==Z||t[51]!==M?(G=s.jsxs(Ce,{className:"h-full w-full space-y-4 p-4",children:[M,Q,Z]}),t[49]=Q,t[50]=Z,t[51]=M,t[52]=G):G=t[52],G};function hs(t){return t.user}function ps(t){const e=le.c(60),{columns:r,data:l}=t;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[0]=a):a=e[0];const[n,i]=b.useState(a);let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c=[],e[1]=c):c=e[1];const[u,d]=b.useState(c),h=ht();let _,j;e[2]===Symbol.for("react.memo_cache_sentinel")?(_=Bt(),j=Lt(),e[2]=_,e[3]=j):(_=e[2],j=e[3]);let y;e[4]===Symbol.for("react.memo_cache_sentinel")?(y=Ut(),e[4]=y):y=e[4];let x;e[5]===Symbol.for("react.memo_cache_sentinel")?(x=Ht(),e[5]=x):x=e[5];let v;e[6]!==u||e[7]!==n?(v={sorting:n,columnFilters:u},e[6]=u,e[7]=n,e[8]=v):v=e[8];let f;e[9]!==r||e[10]!==l||e[11]!==v?(f={data:l,columns:r,getCoreRowModel:_,getPaginationRowModel:j,onSortingChange:i,getSortedRowModel:y,onColumnFiltersChange:d,getFilteredRowModel:x,state:v},e[9]=r,e[10]=l,e[11]=v,e[12]=f):f=e[12];const o=At(f);let p;e[13]!==o?(p=o.getColumn("title")?.getFilterValue()??"",e[13]=o,e[14]=p):p=e[14];let m;e[15]!==o?(m=T=>o.getColumn("title")?.setFilterValue(T.target.value),e[15]=o,e[16]=m):m=e[16];let g;e[17]!==m||e[18]!==p?(g=s.jsx(ne,{placeholder:"Filter title ...",value:p,onChange:m,className:"max-w-sm"}),e[17]=m,e[18]=p,e[19]=g):g=e[19];let w;e[20]!==o?(w=o.getColumn("authors")?.getFilterValue()??"",e[20]=o,e[21]=w):w=e[21];let q;e[22]!==o?(q=T=>o.getColumn("authors")?.setFilterValue(T.target.value),e[22]=o,e[23]=q):q=e[23];let S;e[24]!==w||e[25]!==q?(S=s.jsx(ne,{placeholder:"Filter author ...",value:w,onChange:q,className:"max-w-sm"}),e[24]=w,e[25]=q,e[26]=S):S=e[26];let O;e[27]!==g||e[28]!==S?(O=s.jsxs("div",{className:"flex items-center py-4",children:[g,S]}),e[27]=g,e[28]=S,e[29]=O):O=e[29];let M;e[30]!==o?(M=o.getHeaderGroups().map(vs),e[30]=o,e[31]=M):M=e[31];let k;e[32]!==M?(k=s.jsx(xt,{children:M}),e[32]=M,e[33]=k):k=e[33];let z;e[34]!==r||e[35]!==h||e[36]!==o?(z=o.getRowModel().rows?.length?o.getRowModel().rows.map((T,V)=>s.jsx(Ne,{onClick:()=>h(`/admin/blogs/editor/${T.original.$id}`),className:"cursor-pointer","data-state":T.getIsSelected()&&"selected",children:T.getVisibleCells().map(xs)},V)):s.jsx(Ne,{children:s.jsx(Ke,{colSpan:r.length,className:"h-24 text-center",children:"No results."})}),e[34]=r,e[35]=h,e[36]=o,e[37]=z):z=e[37];let I;e[38]!==z?(I=s.jsx(vt,{children:z}),e[38]=z,e[39]=I):I=e[39];let F;e[40]!==k||e[41]!==I?(F=s.jsx("div",{className:"rounded-md border",children:s.jsxs(bt,{children:[k,I]})}),e[40]=k,e[41]=I,e[42]=F):F=e[42];let D;e[43]!==o?(D=()=>o.previousPage(),e[43]=o,e[44]=D):D=e[44];const R=!o.getCanPreviousPage();let P;e[45]!==D||e[46]!==R?(P=s.jsx(Y,{variant:"outline",size:"sm",onClick:D,disabled:R,children:"Previous"}),e[45]=D,e[46]=R,e[47]=P):P=e[47];let C;e[48]!==o?(C=()=>o.nextPage(),e[48]=o,e[49]=C):C=e[49];const A=!o.getCanNextPage();let N;e[50]!==C||e[51]!==A?(N=s.jsx(Y,{variant:"outline",size:"sm",onClick:C,disabled:A,children:"Next"}),e[50]=C,e[51]=A,e[52]=N):N=e[52];let $;e[53]!==P||e[54]!==N?($=s.jsx("div",{children:s.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[P,N]})}),e[53]=P,e[54]=N,e[55]=$):$=e[55];let K;return e[56]!==O||e[57]!==F||e[58]!==$?(K=s.jsxs("div",{children:[O,F,$]}),e[56]=O,e[57]=F,e[58]=$,e[59]=K):K=e[59],K}function xs(t,e){return s.jsx(Ke,{children:Oe(t.column.columnDef.cell,t.getContext())},e)}function vs(t,e){return s.jsx(Ne,{children:t.headers.map(bs)},e)}function bs(t){return s.jsx(pt,{className:"text-foreground",children:t.isPlaceholder?null:Oe(t.column.columnDef.header,t.getContext())},t.id)}const Ze=()=>{const t=le.c(20),{data:e,isLoading:r,error:l}=jt(),{mutateAsync:a}=_t(),{mutateAsync:n}=ze();let i;t[0]!==n?(i=async(m,g)=>{try{await n({$id:m,status:g})}catch(w){console.error("Failed to update status:",w)}},t[0]=n,t[1]=i):i=t[1];const c=i;let u;t[2]!==a?(u=async m=>{try{await a(m)}catch(g){console.error("Failed to delete article:",g)}},t[2]=a,t[3]=u):u=t[3];const d=u;let h,_,j,y,x;t[4]===Symbol.for("react.memo_cache_sentinel")?(h={accessorKey:"img_url",header:"Image",cell:js},_={accessorKey:"title",header:_s},j={accessorKey:"authors",header:ys},y={accessorKey:"$createdAt",header:ws,cell:Cs},x={accessorKey:"status",header:Ns,cell:Ss},t[4]=h,t[5]=_,t[6]=j,t[7]=y,t[8]=x):(h=t[4],_=t[5],j=t[6],y=t[7],x=t[8]);let v;t[9]!==d||t[10]!==c?(v=[h,_,j,y,x,{id:"actions",cell:m=>{const{row:g}=m;return s.jsxs(yt,{children:[s.jsx(wt,{asChild:!0,children:s.jsx(Y,{variant:"ghost",className:"bg-surface-1 h-8 w-8 p-0",children:s.jsx(Ct,{className:"h-4 w-4"})})}),s.jsxs(Nt,{align:"end",children:[s.jsx(St,{children:"Actions ðŸš€"}),g.original.status==="draft"?s.jsx(we,{onClick:w=>{w.stopPropagation(),c(g.original.$id,"published")},children:"Publish âœ…"}):s.jsx(we,{onClick:w=>{w.stopPropagation(),c(g.original.$id,"draft")},children:"Unpublish ðŸ“‹"}),s.jsx(we,{onClick:w=>{w.stopPropagation(),d(g.original.$id)},children:"Delete âŒ"})]})]})}}],t[9]=d,t[10]=c,t[11]=v):v=t[11];const f=v;if(r){let m;return t[12]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx("p",{children:"Loading blogs..."}),t[12]=m):m=t[12],m}if(l){const m=l;let g;return t[13]!==m.message?(g=s.jsxs("p",{children:["Error loading blogs: ",m.message]}),t[13]=m.message,t[14]=g):g=t[14],g}let o;t[15]!==e?.data?(o=e?.data||[],t[15]=e?.data,t[16]=o):o=t[16];let p;return t[17]!==f||t[18]!==o?(p=s.jsx(ps,{columns:f,data:o}),t[17]=f,t[18]=o,t[19]=p):p=t[19],p};function js(t){const{row:e}=t;return s.jsxs(Tt,{children:[s.jsx(Et,{src:e.original.img_url||""}),s.jsx(Mt,{children:"CN"})]})}function _s(t){const{column:e}=t;return s.jsxs(Y,{variant:"ghost",onClick:()=>e.toggleSorting(e.getIsSorted()==="asc"),children:["Title",s.jsx(je,{className:"ml-2 h-4 w-4"})]})}function ys(t){const{column:e}=t;return s.jsxs(Y,{variant:"ghost",onClick:()=>e.toggleSorting(e.getIsSorted()==="asc"),children:["Authors",s.jsx(je,{className:"ml-2 h-4 w-4"})]})}function ws(t){const{column:e}=t;return s.jsxs(Y,{variant:"ghost",onClick:()=>e.toggleSorting(e.getIsSorted()==="asc"),children:["Created at",s.jsx(je,{className:"ml-2 h-4 w-4"})]})}function Cs(t){const{getValue:e}=t;return s.jsx("span",{children:kt(new Date(e()),"dd/MM/yyyy HH:mm")})}function Ns(t){const{column:e}=t;return s.jsx("div",{className:"text-center",children:s.jsxs(Y,{variant:"ghost",onClick:()=>e.toggleSorting(e.getIsSorted()==="asc"),children:["Status",s.jsx(je,{className:"ml-2 h-4 w-4"})]})})}function Ss(t){const{row:e}=t;return s.jsx("div",{className:"text-center",children:e.original.status==="draft"?"Draft ðŸ“‹":"Public âœ…"})}const Ts=()=>{const t=le.c(5),[e,r]=b.useState("editor");let l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsxs(zt,{className:"mb-4",children:[s.jsx(Re,{value:"editor",children:"New Blog Post"}),s.jsx(Re,{value:"list",children:"All Posts"})]}),t[0]=l):l=t[0];let a;t[1]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx(Ae,{value:"editor",children:s.jsx(Ce,{children:s.jsx(De,{className:"p-4",children:s.jsx(We,{})})})}),t[1]=a):a=t[1];let n;t[2]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx(Ae,{value:"list",children:s.jsx(Ce,{children:s.jsx(De,{className:"p-4",children:s.jsx(Ze,{})})})}),t[2]=n):n=t[2];let i;return t[3]!==e?(i=s.jsx("div",{className:"space-y-4 p-4",children:s.jsxs(Kt,{value:e,onValueChange:r,className:"w-full",children:[l,a,n]})}),t[3]=e,t[4]=i):i=t[4],i},Ls={BlogEditor:We,BlogList:Ze,AdminBlogMain:Ts};export{Ts as AdminBlogMain,We as BlogEditor,Ze as BlogList,Ls as default};
