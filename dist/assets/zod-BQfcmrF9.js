import{g as y,s as p,e as E}from"./index.esm-B9Q8rItI.js";const h=(r,o,n)=>{if(r&&"reportValidity"in r){const e=y(n,o);r.setCustomValidity(e&&e.message||""),r.reportValidity()}},g=(r,o)=>{for(const n in o.fields){const e=o.fields[n];e&&e.ref&&"reportValidity"in e.ref?h(e.ref,n,r):e&&e.refs&&e.refs.forEach(a=>h(a,n,r))}},m=(r,o)=>{o.shouldUseNativeValidation&&g(r,o);const n={};for(const e in r){const a=y(o.fields,e),i=Object.assign(r[e]||{},{ref:a&&a.ref});if(S(o.names||Object.keys(r),e)){const t=Object.assign({},y(n,e));p(t,"root",i),p(n,e,t)}else p(n,e,i)}return n},S=(r,o)=>{const n=v(o);return r.some(e=>v(e).match(`^${n}\\.\\d+`))};function v(r){return r.replace(/\]|\[/g,"")}function j(r,o,n){function e(s,c){var u;Object.defineProperty(s,"_zod",{value:s._zod??{},enumerable:!1}),(u=s._zod).traits??(u.traits=new Set),s._zod.traits.add(r),o(s,c);for(const f in t.prototype)f in s||Object.defineProperty(s,f,{value:t.prototype[f].bind(s)});s._zod.constr=t,s._zod.def=c}const a=n?.Parent??Object;class i extends a{}Object.defineProperty(i,"name",{value:r});function t(s){var c;const u=n?.Parent?new i:this;e(u,s),(c=u._zod).deferred??(c.deferred=[]);for(const f of u._zod.deferred)f();return u}return Object.defineProperty(t,"init",{value:e}),Object.defineProperty(t,Symbol.hasInstance,{value:s=>n?.Parent&&s instanceof n.Parent?!0:s?._zod?.traits?.has(r)}),Object.defineProperty(t,"name",{value:r}),t}class V extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const A={};function P(r){return A}function N(r,o){return typeof o=="bigint"?o.toString():o}const _=Error.captureStackTrace?Error.captureStackTrace:(...r)=>{};function d(r){return typeof r=="string"?r:r?.message}function O(r,o,n){const e={...r,path:r.path??[]};if(!r.message){const a=d(r.inst?._zod.def?.error?.(r))??d(o?.error?.(r))??d(n.customError?.(r))??d(n.localeError?.(r))??"Invalid input";e.message=a}return delete e.inst,delete e.continue,o?.reportInput||delete e.input,e}const z=(r,o)=>{r.name="$ZodError",Object.defineProperty(r,"_zod",{value:r._zod,enumerable:!1}),Object.defineProperty(r,"issues",{value:o,enumerable:!1}),Object.defineProperty(r,"message",{get(){return JSON.stringify(o,N,2)},enumerable:!0}),Object.defineProperty(r,"toString",{value:()=>r.message,enumerable:!1})},Z=j("$ZodError",z),w=j("$ZodError",z,{Parent:Error}),$=r=>(o,n,e,a)=>{const i=e?Object.assign(e,{async:!1}):{async:!1},t=o._zod.run({value:n,issues:[]},i);if(t instanceof Promise)throw new V;if(t.issues.length){const s=new(a?.Err??r)(t.issues.map(c=>O(c,i,P())));throw _(s,a?.callee),s}return t.value},U=$(w),k=r=>async(o,n,e,a)=>{const i=e?Object.assign(e,{async:!0}):{async:!0};let t=o._zod.run({value:n,issues:[]},i);if(t instanceof Promise&&(t=await t),t.issues.length){const s=new(a?.Err??r)(t.issues.map(c=>O(c,i,P())));throw _(s,a?.callee),s}return t.value},I=k(w);function b(r,o){try{var n=r()}catch(e){return o(e)}return n&&n.then?n.then(void 0,o):n}function C(r,o){for(var n={};r.length;){var e=r[0],a=e.code,i=e.message,t=e.path.join(".");if(!n[t])if("unionErrors"in e){var s=e.unionErrors[0].errors[0];n[t]={message:s.message,type:s.code}}else n[t]={message:i,type:a};if("unionErrors"in e&&e.unionErrors.forEach(function(f){return f.errors.forEach(function(l){return r.push(l)})}),o){var c=n[t].types,u=c&&c[e.code];n[t]=E(t,o,n,a,u?[].concat(u,e.message):e.message)}r.shift()}return n}function M(r,o){for(var n={};r.length;){var e=r[0],a=e.code,i=e.message,t=e.path.join(".");if(!n[t])if(e.code==="invalid_union"&&e.errors.length>0){var s=e.errors[0][0];n[t]={message:s.message,type:s.code}}else n[t]={message:i,type:a};if(e.code==="invalid_union"&&e.errors.forEach(function(f){return f.forEach(function(l){return r.push(l)})}),o){var c=n[t].types,u=c&&c[e.code];n[t]=E(t,o,n,a,u?[].concat(u,e.message):e.message)}r.shift()}return n}function x(r,o,n){if(n===void 0&&(n={}),function(e){return"_def"in e&&typeof e._def=="object"&&"typeName"in e._def}(r))return function(e,a,i){try{return Promise.resolve(b(function(){return Promise.resolve(r[n.mode==="sync"?"parse":"parseAsync"](e,o)).then(function(t){return i.shouldUseNativeValidation&&g({},i),{errors:{},values:n.raw?Object.assign({},e):t}})},function(t){if(function(s){return Array.isArray(s?.issues)}(t))return{values:{},errors:m(C(t.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw t}))}catch(t){return Promise.reject(t)}};if(function(e){return"_zod"in e&&typeof e._zod=="object"}(r))return function(e,a,i){try{return Promise.resolve(b(function(){return Promise.resolve((n.mode==="sync"?U:I)(r,e,o)).then(function(t){return i.shouldUseNativeValidation&&g({},i),{errors:{},values:n.raw?Object.assign({},e):t}})},function(t){if(function(s){return s instanceof Z}(t))return{values:{},errors:m(M(t.issues,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw t}))}catch(t){return Promise.reject(t)}};throw new Error("Invalid input: not a Zod schema")}export{x as a};
